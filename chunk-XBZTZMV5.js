import{a as st}from"./chunk-ZCPFIYMW.js";import{$ as te,A as Y,D as Ht,E as Yt,F as U,I as q,J as Q,K as Ut,L as W,M as K,N as J,O as qt,P as Qt,Q as Wt,R as Kt,S as Jt,V as Xt,X as Zt,aa as ee,ba as ne,ea as ae,fa as oe,ga as ie,ha as re,k as kt,ma as se,p as Dt,q as Ft,r as zt,s as Rt,t as jt,u as $t,v as At,w as Lt,x as Nt,y as Vt,z as Bt,za as le}from"./chunk-YJA7LBCE.js";import{$a as O,Bd as ce,Ea as l,Fa as o,Ga as a,Ha as h,K as _t,Kb as B,La as w,Lb as E,Ma as S,Nb as vt,Oa as v,P as f,Pb as Pt,Q as C,Qa as u,Ra as p,Tb as Ot,Va as ot,Wa as it,Xa as rt,_ as N,_b as yt,a as gt,ab as $,bb as A,db as r,dc as H,ea as s,eb as g,fb as x,gc as D,h as ut,hb as Ct,hc as bt,ia as V,ib as xt,jb as ht,jc as wt,kc as St,ma as G,mb as k,md as z,n as L,na as ft,o as at,pb as P,qa as d,qb as y,qc as Gt,rb as Mt,rd as R,sa as T,sc as Et,td as I,ub as F,uc as It,vc as Tt,vd as j}from"./chunk-JUX2TMYD.js";function Ce(i,e){if(i&1&&(o(0,"mat-panel-description"),r(1),a()),i&2){let t=p();s(),x(" ",t.getActiveFiltersCount()," filtro(s) activo(s) ")}}function xe(i,e){i&1&&(o(0,"span"),r(1,", "),a())}function he(i,e){if(i&1&&(o(0,"div",31)(1,"mat-icon"),r(2),a(),o(3,"span"),r(4),a(),d(5,xe,2,0,"span",4),a()),i&2){let t=e.$implicit,n=e.index,c=p(2);s(),$("color",t.color),s(),g(t.icono),s(2),g(t.nombre),s(),l("ngIf",n<c.getSelectedCategoriesForDisplay().length-1)}}function Me(i,e){if(i&1&&(o(0,"div",29),d(1,he,6,5,"div",30),a()),i&2){let t=p();s(),l("ngForOf",t.getSelectedCategoriesForDisplay())}}function ve(i,e){i&1&&(o(0,"span"),r(1,"Selecciona categor\xEDas"),a())}function Pe(i,e){if(i&1&&(o(0,"span",34),r(1),a()),i&2){let t=p().$implicit,n=p();s(),x(" (",n.getCategoriaCount(t.id),") ")}}function Oe(i,e){if(i&1&&(o(0,"mat-option",32)(1,"div",31)(2,"mat-icon"),r(3),a(),o(4,"span"),r(5),a(),d(6,Pe,2,1,"span",33),a()()),i&2){let t=e.$implicit,n=p();l("value",t.id),s(2),$("color",t.color),s(),g(t.icono),s(2),g(t.nombre),s(),l("ngIf",n.getCategoriaCount(t.id)>0)}}function ye(i,e){if(i&1){let t=v();o(0,"button",35),u("click",function(){f(t);let c=p();return C(c.clearSearch())}),o(1,"mat-icon"),r(2,"clear"),a()()}}function be(i,e){if(i&1){let t=v();o(0,"mat-chip",39),u("removed",function(){f(t);let c=p(2);return C(c.clearCategoriaFilter())}),r(1),o(2,"mat-icon",40),r(3,"cancel"),a()()}if(i&2){let t=p(2);s(),x(" ",t.getSelectedCategoriasText()," ")}}function we(i,e){if(i&1){let t=v();o(0,"mat-chip",39),u("removed",function(){f(t);let c=p(2);return C(c.clearSearch())}),r(1),o(2,"mat-icon",40),r(3,"cancel"),a()()}if(i&2){let t=p(2);s(),x(' B\xFAsqueda: "',t.searchControl.value,'" ')}}function Se(i,e){if(i&1){let t=v();o(0,"mat-chip",39),u("removed",function(){f(t);let c=p(2);return C(c.clearDateFilter())}),r(1),o(2,"mat-icon",40),r(3,"cancel"),a()()}if(i&2){let t=p(2);s(),x(" ",t.getDateRangeText()," ")}}function Ge(i,e){if(i&1){let t=v();o(0,"mat-chip",39),u("removed",function(){f(t);let c=p(2);return C(c.clearMontoFilter())}),r(1),o(2,"mat-icon",40),r(3,"cancel"),a()()}if(i&2){let t=p(2);s(),x(" ",t.getMontoRangeText()," ")}}function Ee(i,e){if(i&1&&(o(0,"div",36)(1,"div",37)(2,"mat-chip-set"),d(3,be,4,1,"mat-chip",38)(4,we,4,1,"mat-chip",38)(5,Se,4,1,"mat-chip",38)(6,Ge,4,1,"mat-chip",38),a()()()),i&2){let t=p();s(3),l("ngIf",t.getSelectedCategoriasText()),s(),l("ngIf",t.searchControl.value),s(),l("ngIf",t.fechaDesdeControl.value||t.fechaHastaControl.value),s(),l("ngIf",t.montoMinControl.value||t.montoMaxControl.value)}}var X=class i{categorias=[];gastosCounts={};filterChange=new T;categoriaControl=new D([]);searchControl=new D("");fechaDesdeControl=new D;fechaHastaControl=new D;montoMinControl=new D;montoMaxControl=new D;ngOnInit(){this.categoriaControl.valueChanges.subscribe(()=>this.applyFilters()),this.searchControl.valueChanges.subscribe(()=>this.applyFilters()),this.fechaDesdeControl.valueChanges.subscribe(()=>this.applyFilters()),this.fechaHastaControl.valueChanges.subscribe(()=>this.applyFilters()),this.montoMinControl.valueChanges.subscribe(()=>this.applyFilters()),this.montoMaxControl.valueChanges.subscribe(()=>this.applyFilters())}applyFilters(){let e={categorias:this.categoriaControl.value||[],search:this.searchControl.value||"",fechaDesde:this.fechaDesdeControl.value,fechaHasta:this.fechaHastaControl.value,montoMin:this.montoMinControl.value,montoMax:this.montoMaxControl.value};this.filterChange.emit(e)}clearAllFilters(){this.categoriaControl.setValue([]),this.searchControl.setValue(""),this.fechaDesdeControl.setValue(null),this.fechaHastaControl.setValue(null),this.montoMinControl.setValue(null),this.montoMaxControl.setValue(null)}clearSearch(){this.searchControl.setValue("")}clearCategoriaFilter(){this.categoriaControl.setValue([])}clearDateFilter(){this.fechaDesdeControl.setValue(null),this.fechaHastaControl.setValue(null)}clearMontoFilter(){this.montoMinControl.setValue(null),this.montoMaxControl.setValue(null)}hasActiveFilters(){return!!(this.categoriaControl.value?.length||this.searchControl.value||this.fechaDesdeControl.value||this.fechaHastaControl.value||this.montoMinControl.value||this.montoMaxControl.value)}getActiveFiltersCount(){let e=0;return this.categoriaControl.value?.length&&e++,this.searchControl.value&&e++,(this.fechaDesdeControl.value||this.fechaHastaControl.value)&&e++,(this.montoMinControl.value||this.montoMaxControl.value)&&e++,e}getCategoriaCount(e){return this.gastosCounts[e]||0}getSelectedCategoriasText(){let e=this.categoriaControl.value||[];if(e.length===0)return"";if(e.includes("all"))return"Todas las categor\xEDas";if(e.length===1){let t=this.categorias.find(n=>n.id===e[0]);return t?t.nombre:""}return`${e.length} categor\xEDas seleccionadas`}getDateRangeText(){let e=this.fechaDesdeControl.value,t=this.fechaHastaControl.value;return e&&t?`${this.formatDate(e)} - ${this.formatDate(t)}`:e?`Desde ${this.formatDate(e)}`:t?`Hasta ${this.formatDate(t)}`:""}getMontoRangeText(){let e=this.montoMinControl.value,t=this.montoMaxControl.value;return e&&t?`$${e} - $${t}`:e?`Desde $${e}`:t?`Hasta $${t}`:""}formatDate(e){return new Intl.DateTimeFormat("es-AR",{day:"2-digit",month:"2-digit",year:"numeric"}).format(e)}getSelectedCategoriesForDisplay(){let e=this.categoriaControl.value||[];return e.includes("all")?this.categorias:this.categorias.filter(t=>e.includes(t.id))}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=G({type:i,selectors:[["app-gastos-categoria-filter"]],inputs:{categorias:"categorias",gastosCounts:"gastosCounts"},outputs:{filterChange:"filterChange"},standalone:!1,decls:71,vars:18,consts:[["noSelection",""],["pickerDesde",""],["pickerHasta",""],[1,"filters-panel",3,"expanded"],[4,"ngIf"],[1,"filters-content"],["appearance","outline",1,"categoria-select"],["multiple","",3,"formControl"],["class","selected-categories",4,"ngIf","ngIfElse"],["value","all"],[1,"categoria-option","all-option"],[3,"value",4,"ngFor","ngForOf"],["matSuffix",""],["appearance","outline",1,"search-field"],["matInput","","placeholder","Buscar por descripci\xF3n...","maxlength","50",3,"formControl"],["mat-icon-button","","matSuffix","","matTooltip","Limpiar b\xFAsqueda",3,"click",4,"ngIf"],[1,"date-range-container"],["appearance","outline",1,"date-field"],["matInput","","readonly","",3,"click","matDatepicker","formControl"],["matSuffix","",3,"for"],[1,"monto-range-container"],["appearance","outline",1,"monto-field"],["matInput","","type","number","placeholder","0","min","0",3,"formControl"],["matPrefix",""],["matInput","","type","number","placeholder","Sin l\xEDmite","min","0",3,"formControl"],[1,"filter-actions"],["mat-stroked-button","",3,"click","disabled"],["mat-raised-button","","color","primary",3,"click"],["class","active-filters",4,"ngIf"],[1,"selected-categories"],["class","categoria-option",4,"ngFor","ngForOf"],[1,"categoria-option"],[3,"value"],["class","categoria-count",4,"ngIf"],[1,"categoria-count"],["mat-icon-button","","matSuffix","","matTooltip","Limpiar b\xFAsqueda",3,"click"],[1,"active-filters"],[1,"filter-chips"],[3,"removed",4,"ngIf"],[3,"removed"],["matChipRemove",""]],template:function(t,n){if(t&1){let c=v();o(0,"mat-expansion-panel",3)(1,"mat-expansion-panel-header")(2,"mat-panel-title")(3,"mat-icon"),r(4,"filter_alt"),a(),r(5," Filtros de B\xFAsqueda "),a(),d(6,Ce,2,1,"mat-panel-description",4),a(),o(7,"div",5)(8,"mat-form-field",6)(9,"mat-label"),r(10,"Filtrar por categor\xEDa"),a(),o(11,"mat-select",7)(12,"mat-select-trigger"),d(13,Me,2,1,"div",8)(14,ve,2,0,"ng-template",null,0,F),a(),o(16,"mat-option",9)(17,"div",10)(18,"mat-icon"),r(19,"select_all"),a(),o(20,"span"),r(21,"Todas las categor\xEDas"),a()()(),h(22,"mat-divider"),d(23,Oe,7,6,"mat-option",11),a(),o(24,"mat-icon",12),r(25,"filter_list"),a()(),o(26,"mat-form-field",13)(27,"mat-label"),r(28,"Buscar gastos"),a(),h(29,"input",14),o(30,"mat-icon",12),r(31,"search"),a(),d(32,ye,3,0,"button",15),a(),o(33,"div",16)(34,"mat-form-field",17)(35,"mat-label"),r(36,"Fecha desde"),a(),o(37,"input",18),u("click",function(){f(c);let _=O(40);return C(_.open())}),a(),h(38,"mat-datepicker-toggle",19)(39,"mat-datepicker",null,1),a(),o(41,"mat-form-field",17)(42,"mat-label"),r(43,"Fecha hasta"),a(),o(44,"input",18),u("click",function(){f(c);let _=O(47);return C(_.open())}),a(),h(45,"mat-datepicker-toggle",19)(46,"mat-datepicker",null,2),a()(),o(48,"div",20)(49,"mat-form-field",21)(50,"mat-label"),r(51,"Monto m\xEDnimo"),a(),h(52,"input",22),o(53,"span",23),r(54,"$\xA0"),a()(),o(55,"mat-form-field",21)(56,"mat-label"),r(57,"Monto m\xE1ximo"),a(),h(58,"input",24),o(59,"span",23),r(60,"$\xA0"),a()()(),o(61,"div",25)(62,"button",26),u("click",function(){return f(c),C(n.clearAllFilters())}),o(63,"mat-icon"),r(64,"clear_all"),a(),r(65," Limpiar Filtros "),a(),o(66,"button",27),u("click",function(){return f(c),C(n.applyFilters())}),o(67,"mat-icon"),r(68,"filter_alt"),a(),r(69," Aplicar Filtros "),a()(),d(70,Ee,7,4,"div",28),a()()}if(t&2){let c=O(15),m=O(40),_=O(47);l("expanded",!1),s(6),l("ngIf",n.hasActiveFilters()),s(5),l("formControl",n.categoriaControl),s(2),l("ngIf",n.getSelectedCategoriesForDisplay().length>0)("ngIfElse",c),s(10),l("ngForOf",n.categorias),s(6),l("formControl",n.searchControl),s(3),l("ngIf",n.searchControl.value),s(5),l("matDatepicker",m)("formControl",n.fechaDesdeControl),s(),l("for",m),s(6),l("matDatepicker",_)("formControl",n.fechaHastaControl),s(),l("for",_),s(7),l("formControl",n.montoMinControl),s(6),l("formControl",n.montoMaxControl),s(4),l("disabled",!n.hasActiveFilters()),s(8),l("ngIf",n.hasActiveFilters())}},dependencies:[B,E,yt,wt,H,Et,Gt,St,R,z,I,kt,Qt,U,Y,Ht,Yt,Q,Ut,q,Wt,Kt,Jt,ee,te,ne,W,ae,oe,re,ie],styles:['.filters-panel[_ngcontent-%COMP%]{margin-top:24px;margin-bottom:24px;background-color:var(--mat-sys-surface-container-low);border-radius:12px;border:1px solid var(--mat-sys-outline-variant);box-shadow:var(--mat-sys-elevation-level2);animation:_ngcontent-%COMP%_slideInUp .4s ease-out;overflow:hidden}.filters-panel[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;height:3px;background:linear-gradient(90deg,var(--mat-sys-primary) 0%,var(--mat-sys-secondary) 50%,var(--mat-sys-tertiary) 100%);z-index:1}.filters-panel[_ngcontent-%COMP%]     .mat-expansion-panel-header{min-height:64px;padding-inline:24px;border-radius:8px 8px 0 0;background-color:var(--mat-sys-surface-container);transition:background .3s,box-shadow .3s;box-shadow:none;height:auto}.filters-panel[_ngcontent-%COMP%]     .mat-expansion-panel-header:hover{background-color:var(--mat-sys-surface-container-high)}.filters-panel[_ngcontent-%COMP%]     .mat-expansion-panel-header .mat-expansion-panel-header-title{display:flex;align-items:center;gap:12px;font-size:18px;font-weight:600;color:var(--mat-sys-on-surface);margin:0}.filters-panel[_ngcontent-%COMP%]     .mat-expansion-panel-header .mat-expansion-panel-header-title mat-icon{color:var(--mat-sys-primary);font-size:24px;width:24px;height:24px}.filters-panel[_ngcontent-%COMP%]     .mat-expansion-panel-header .mat-expansion-panel-header-description{justify-content:flex-end;align-items:center;color:var(--mat-sys-primary);font-weight:500;font-size:14px;background:var(--mat-sys-primary-container);padding:4px 12px;border-radius:12px;margin-right:8px}.filters-panel[_ngcontent-%COMP%]     .mat-expansion-panel-content .mat-expansion-panel-body{padding:0}.filters-panel[_ngcontent-%COMP%]   .filters-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px;padding:24px;background:var(--mat-sys-surface-container-lowest)}.filters-panel[_ngcontent-%COMP%]   .categoria-select[_ngcontent-%COMP%]{width:100%}.filters-panel[_ngcontent-%COMP%]   .categoria-select[_ngcontent-%COMP%]     .mat-mdc-form-field-focus-overlay{background-color:transparent}.filters-panel[_ngcontent-%COMP%]   .categoria-select[_ngcontent-%COMP%]     .mat-mdc-text-field-wrapper{background-color:var(--mat-sys-surface-container);border-radius:8px}.filters-panel[_ngcontent-%COMP%]   .categoria-select[_ngcontent-%COMP%]     .mat-mdc-text-field-wrapper:hover{background-color:var(--mat-sys-surface-container-high)}.filters-panel[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]{width:100%}.filters-panel[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]     .mat-mdc-text-field-wrapper{background-color:var(--mat-sys-surface-container);border-radius:8px;transition:all .3s ease}.filters-panel[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]     .mat-mdc-text-field-wrapper:hover{background-color:var(--mat-sys-surface-container-high)}.filters-panel[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]     .mat-mdc-form-field-focus-overlay{background-color:transparent}.filters-panel[_ngcontent-%COMP%]   .categoria-option[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;width:100%;padding:4px 0;transition:all .2s ease}.filters-panel[_ngcontent-%COMP%]   .categoria-option[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px;transition:transform .2s ease}.filters-panel[_ngcontent-%COMP%]   .categoria-option[_ngcontent-%COMP%]:hover   mat-icon[_ngcontent-%COMP%]{transform:scale(1.1)}.filters-panel[_ngcontent-%COMP%]   .selected-categories[_ngcontent-%COMP%]{display:flex;align-items:center;flex-wrap:wrap;gap:4px}.filters-panel[_ngcontent-%COMP%]   .categoria-count[_ngcontent-%COMP%]{margin-left:auto;color:var(--mat-sys-on-surface-variant);font-size:.75rem;font-weight:600;background:var(--mat-sys-surface-variant);padding:2px 8px;border-radius:12px;min-width:24px;text-align:center}.filters-panel[_ngcontent-%COMP%]   .categoria-option.all-option[_ngcontent-%COMP%]{font-weight:600;color:var(--mat-sys-primary);background:var(--mat-sys-primary-container);padding:6px 12px;border-radius:6px;margin:4px 0}.filters-panel[_ngcontent-%COMP%]   .categoria-option.all-option[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:var(--mat-sys-primary)}.filters-panel[_ngcontent-%COMP%]   .date-range-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:16px}.filters-panel[_ngcontent-%COMP%]   .date-range-container[_ngcontent-%COMP%]     .mat-mdc-text-field-wrapper{background-color:var(--mat-sys-surface-container);border-radius:8px}.filters-panel[_ngcontent-%COMP%]   .date-range-container[_ngcontent-%COMP%]     .mat-mdc-text-field-wrapper:hover{background-color:var(--mat-sys-surface-container-high)}.filters-panel[_ngcontent-%COMP%]   .date-field[_ngcontent-%COMP%]{width:100%}.filters-panel[_ngcontent-%COMP%]   .monto-range-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:16px}.filters-panel[_ngcontent-%COMP%]   .monto-range-container[_ngcontent-%COMP%]     .mat-mdc-text-field-wrapper{background-color:var(--mat-sys-surface-container);border-radius:8px}.filters-panel[_ngcontent-%COMP%]   .monto-range-container[_ngcontent-%COMP%]     .mat-mdc-text-field-wrapper:hover{background-color:var(--mat-sys-surface-container-high)}.filters-panel[_ngcontent-%COMP%]   .monto-field[_ngcontent-%COMP%]{width:100%}.filters-panel[_ngcontent-%COMP%]   .filter-actions[_ngcontent-%COMP%]{display:flex;gap:12px;justify-content:flex-end;align-items:center;margin-top:8px}.filters-panel[_ngcontent-%COMP%]   .filter-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;min-width:140px;height:44px;border-radius:8px;font-weight:500;transition:all .3s ease}.filters-panel[_ngcontent-%COMP%]   .filter-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px}.filters-panel[_ngcontent-%COMP%]   .filter-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:var(--mat-sys-elevation-level2)}.filters-panel[_ngcontent-%COMP%]   .filter-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.filters-panel[_ngcontent-%COMP%]   .filter-actions[_ngcontent-%COMP%]   button[mat-stroked-button][_ngcontent-%COMP%]{border-width:2px}.filters-panel[_ngcontent-%COMP%]   .filter-actions[_ngcontent-%COMP%]   button[mat-stroked-button][_ngcontent-%COMP%]:hover:not(:disabled){background-color:var(--mat-sys-surface-container-high)}.filters-panel[_ngcontent-%COMP%]   .filter-actions[_ngcontent-%COMP%]   button[mat-raised-button][_ngcontent-%COMP%]{box-shadow:var(--mat-sys-elevation-level1)}.filters-panel[_ngcontent-%COMP%]   .filter-actions[_ngcontent-%COMP%]   button[mat-raised-button][_ngcontent-%COMP%]:hover:not(:disabled){box-shadow:var(--mat-sys-elevation-level3)}.filters-panel[_ngcontent-%COMP%]   .active-filters[_ngcontent-%COMP%]{border-top:2px solid var(--mat-sys-outline-variant);padding-top:20px;margin-top:8px;animation:_ngcontent-%COMP%_slideDown .3s ease-out}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.filters-panel[_ngcontent-%COMP%]   .filter-chips[_ngcontent-%COMP%]   mat-chip-set[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:10px}.filters-panel[_ngcontent-%COMP%]   .filter-chips[_ngcontent-%COMP%]   mat-chip[_ngcontent-%COMP%]{background:var(--mat-sys-primary-container)!important;color:var(--mat-sys-on-primary-container)!important;font-size:.875rem;font-weight:500;padding:8px 12px;border-radius:16px;transition:all .2s ease;border:1px solid var(--mat-sys-primary)}.filters-panel[_ngcontent-%COMP%]   .filter-chips[_ngcontent-%COMP%]   mat-chip[_ngcontent-%COMP%]:hover{background:var(--mat-sys-primary)!important;color:var(--mat-sys-on-primary)!important;transform:translateY(-1px);box-shadow:var(--mat-sys-elevation-level1)}.filters-panel[_ngcontent-%COMP%]   .filter-chips[_ngcontent-%COMP%]   mat-chip[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:var(--mat-sys-on-primary-container)!important;font-size:18px;width:18px;height:18px;transition:color .2s ease}.filters-panel[_ngcontent-%COMP%]   .filter-chips[_ngcontent-%COMP%]   mat-chip[_ngcontent-%COMP%]:hover   mat-icon[_ngcontent-%COMP%]{color:var(--mat-sys-on-primary)!important}@media (max-width: 768px){.filters-panel[_ngcontent-%COMP%]   .filters-panel[_ngcontent-%COMP%]{margin-top:24px;border-radius:8px}.filters-panel[_ngcontent-%COMP%]   .filters-panel[_ngcontent-%COMP%]     .mat-expansion-panel-header{padding:12px 16px;min-height:56px;border-radius:8px 8px 0 0}.filters-panel[_ngcontent-%COMP%]   .filters-panel[_ngcontent-%COMP%]     .mat-expansion-panel-header .mat-expansion-panel-header-title{font-size:16px;gap:10px}.filters-panel[_ngcontent-%COMP%]   .filters-panel[_ngcontent-%COMP%]     .mat-expansion-panel-header .mat-expansion-panel-header-title mat-icon{font-size:20px;width:20px;height:20px}.filters-panel[_ngcontent-%COMP%]   .filters-panel[_ngcontent-%COMP%]     .mat-expansion-panel-header .mat-expansion-panel-header-description{font-size:12px;padding:3px 8px}.filters-panel[_ngcontent-%COMP%]   .filters-content[_ngcontent-%COMP%]{padding:12px;gap:12px}.filters-panel[_ngcontent-%COMP%]   .date-range-container[_ngcontent-%COMP%], .filters-panel[_ngcontent-%COMP%]   .monto-range-container[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:12px}}.filters-panel[_ngcontent-%COMP%]   .filter-actions[_ngcontent-%COMP%]{flex-direction:column;gap:10px}.filters-panel[_ngcontent-%COMP%]   .filter-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;justify-content:center;min-width:unset}.filters-panel[_ngcontent-%COMP%]   .filter-chips[_ngcontent-%COMP%]   mat-chip-set[_ngcontent-%COMP%]{gap:8px}.filters-panel[_ngcontent-%COMP%]   .filter-chips[_ngcontent-%COMP%]   mat-chip[_ngcontent-%COMP%]{font-size:.8rem;padding:6px 10px}@media (max-width: 480px){.filters-panel[_ngcontent-%COMP%]{border-radius:8px}.filters-panel[_ngcontent-%COMP%]     .mat-expansion-panel-header{padding:8px 12px;min-height:48px;border-radius:8px 8px 0 0}.filters-panel[_ngcontent-%COMP%]     .mat-expansion-panel-header .mat-expansion-panel-header-title{font-size:15px;gap:8px}.filters-panel[_ngcontent-%COMP%]     .mat-expansion-panel-header .mat-expansion-panel-header-title mat-icon{font-size:18px;width:18px;height:18px}.filters-panel[_ngcontent-%COMP%]     .mat-expansion-panel-header .mat-expansion-panel-header-description{font-size:11px;padding:2px 6px}.filters-content[_ngcontent-%COMP%]{padding:8px;gap:8px}.categoria-option[_ngcontent-%COMP%]{gap:6px}.categoria-option[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px}.categoria-option[_ngcontent-%COMP%]   .categoria-count[_ngcontent-%COMP%]{font-size:.7rem;padding:2px 6px}.filter-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:40px;font-size:.875rem}.filter-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px}}.filters-panel[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp .4s ease-out}@keyframes _ngcontent-%COMP%_slideInUp{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}  .filters-content .mat-mdc-form-field .mat-mdc-form-field-subscript-wrapper{margin-top:4px}  .filters-content .mat-mdc-form-field .mat-mdc-form-field-error{color:var(--mat-sys-error);font-size:.75rem}  .filters-content .mat-mdc-form-field .mat-mdc-form-field-hint{color:var(--mat-sys-on-surface-variant);font-size:.75rem}  .filters-content .mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading,   .filters-content .mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__notch,   .filters-content .mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing{border-color:var(--mat-sys-outline-variant)}  .filters-content .mat-mdc-text-field-wrapper.mdc-text-field--outlined:hover .mdc-notched-outline .mdc-notched-outline__leading,   .filters-content .mat-mdc-text-field-wrapper.mdc-text-field--outlined:hover .mdc-notched-outline .mdc-notched-outline__notch,   .filters-content .mat-mdc-text-field-wrapper.mdc-text-field--outlined:hover .mdc-notched-outline .mdc-notched-outline__trailing{border-color:var(--mat-sys-on-surface)}.filter-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus, .filter-chips[_ngcontent-%COMP%]   mat-chip[_ngcontent-%COMP%]:focus{outline:2px solid var(--mat-sys-primary);outline-offset:2px}.filters-panel.loading[_ngcontent-%COMP%]{opacity:.6;pointer-events:none}.filters-panel.loading[_ngcontent-%COMP%]:after{content:"";position:absolute;inset:0;background:var(--mat-sys-surface-container-low);opacity:.8;z-index:1}']})};var Te=()=>[10,25,50];function ke(i,e){if(i&1&&(o(0,"mat-option",7)(1,"div",9)(2,"span"),r(3),a()()()),i&2){let t=e.$implicit;l("value",t.id),s(3),g(t.nombre)}}function De(i,e){if(i&1){let t=v();o(0,"div",4)(1,"mat-form-field",5)(2,"mat-label"),r(3,"Filtrar por tarjeta"),a(),o(4,"mat-select",6),ht("ngModelChange",function(c){f(t);let m=p();return xt(m.selectedTarjetaId,c)||(m.selectedTarjetaId=c),C(c)}),u("ngModelChange",function(){f(t);let c=p();return C(c.applyTarjetaFilter())}),o(5,"mat-option",7),r(6,"Todas"),a(),d(7,ke,4,2,"mat-option",8),a()()()}if(i&2){let t=p();s(4),Ct("ngModel",t.selectedTarjetaId),s(3),l("ngForOf",t.tarjetas)}}function Fe(i,e){i&1&&(o(0,"th",30),r(1,"Gasto"),a())}function ze(i,e){i&1&&(o(0,"mat-icon",39),r(1," trending_up "),a())}function Re(i,e){if(i&1&&(o(0,"mat-icon",40),r(1," edit_calendar "),a()),i&2){let t=p().$implicit,n=p(2);l("matTooltip",n.getTooltipMontosPersonalizados(t))}}function je(i,e){if(i&1&&(o(0,"div",41),r(1),a()),i&2){let t=p().$implicit,n=p(2);s(),x(" ",n.getAumentoDisplay(t)," ")}}function $e(i,e){if(i&1&&(o(0,"td",31)(1,"div",32)(2,"mat-icon"),r(3),a(),o(4,"div",33)(5,"div",9)(6,"span",34),r(7),a(),d(8,ze,2,0,"mat-icon",35)(9,Re,2,1,"mat-icon",36),a(),o(10,"div",37),r(11),a(),d(12,je,2,1,"div",38),a()()()),i&2){let t=e.$implicit,n=p(2);s(2),$("color",n.getCategoriaColor(t.categoriaId)),s(),g(n.getCategoriaIcon(t.categoriaId)),s(4),g(t.descripcion),s(),l("ngIf",n.isGastoFijo(t)),s(),l("ngIf",n.tieneMontoPersonalizado(t)),s(2),g(n.getCategoriaName(t.categoriaId)),s(),l("ngIf",n.getAumentoDisplay(t))}}function Ae(i,e){i&1&&(o(0,"th",30),r(1,"Monto por Cuota"),a())}function Le(i,e){if(i&1&&(o(0,"td",42),r(1),a()),i&2){let t=e.$implicit,n=p(2);s(),x(" ",n.formatCurrency(t.monto)," ")}}function Ne(i,e){i&1&&(o(0,"th",30),r(1,"Monto Total"),a())}function Ve(i,e){if(i&1&&(o(0,"td",43),r(1),a()),i&2){let t=e.$implicit,n=p(2);s(),x(" ",t.montoTotal&&t.montoTotal>0?n.formatCurrency(t.montoTotal):"-"," ")}}function Be(i,e){i&1&&(o(0,"th",30),r(1,"Fecha Inicio"),a())}function He(i,e){if(i&1&&(o(0,"td",31),r(1),P(2,"date"),a()),i&2){let t=e.$implicit;s(),g(Mt(2,1,t.fechaInicio,"MMM yyyy"))}}function Ye(i,e){i&1&&(o(0,"th",44),r(1,"Recurrencia"),a())}function Ue(i,e){if(i&1&&(o(0,"td",31)(1,"span",45),r(2),a()()),i&2){let t=e.$implicit,n=p(2);s(),A("gasto-fijo-chip",n.isGastoFijo(t)),s(),x(" ",n.getRecurrenciaDisplay(t)," ")}}function qe(i,e){i&1&&(o(0,"th",44),r(1,"Cuotas"),a())}function Qe(i,e){if(i&1&&(o(0,"td",31),r(1),a()),i&2){let t=e.$implicit,n=p(2);s(),g(n.getCuotasDisplay(t))}}function We(i,e){i&1&&(o(0,"th",44),r(1,"Tarjeta"),a())}function Ke(i,e){i&1&&(o(0,"mat-icon",47),r(1,"credit_card"),a())}function Je(i,e){if(i&1&&(o(0,"td",31)(1,"div",9),d(2,Ke,2,0,"mat-icon",46),o(3,"span"),r(4),a()()()),i&2){let t=e.$implicit,n=p(2);s(2),l("ngIf",t.idTarjeta),s(2),g(n.getTarjetaName(t.idTarjeta))}}function Xe(i,e){i&1&&(o(0,"th",48),r(1,"Acciones"),a())}function Ze(i,e){if(i&1){let t=v();o(0,"td",49)(1,"div",50)(2,"button",51),u("click",function(){let c=f(t).$implicit,m=p(2);return C(m.onEdit(c))}),o(3,"mat-icon"),r(4,"edit"),a()(),o(5,"button",52),u("click",function(){let c=f(t).$implicit,m=p(2);return C(m.onClone(c))}),o(6,"mat-icon"),r(7,"content_copy"),a()(),o(8,"button",53),u("click",function(){let c=f(t).$implicit,m=p(2);return C(m.onDelete(c.id))}),o(9,"mat-icon"),r(10,"delete"),a()()()()}}function tn(i,e){i&1&&h(0,"tr",54)}function en(i,e){if(i&1&&h(0,"tr",55),i&2){let t=e.$implicit,n=p(2);A("gasto-fijo-row",n.isGastoFijo(t))}}function nn(i,e){if(i&1&&(o(0,"div",10)(1,"table",11),w(2,12),d(3,Fe,2,0,"th",13)(4,$e,13,8,"td",14),S(),w(5,15),d(6,Ae,2,0,"th",13)(7,Le,2,1,"td",16),S(),w(8,17),d(9,Ne,2,0,"th",13)(10,Ve,2,1,"td",18),S(),w(11,19),d(12,Be,2,0,"th",13)(13,He,3,4,"td",14),S(),w(14,20),d(15,Ye,2,0,"th",21)(16,Ue,3,3,"td",14),S(),w(17,22),d(18,qe,2,0,"th",21)(19,Qe,2,1,"td",14),S(),w(20,23),d(21,We,2,0,"th",21)(22,Je,5,2,"td",14),S(),w(23,24),d(24,Xe,2,0,"th",25)(25,Ze,11,0,"td",26),S(),d(26,tn,1,0,"tr",27)(27,en,1,2,"tr",28),a(),h(28,"mat-paginator",29),a()),i&2){let t=p();s(),l("dataSource",t.dataSource),s(25),l("matHeaderRowDef",t.displayedColumns),s(),l("matRowDefColumns",t.displayedColumns),s(),l("pageSizeOptions",k(4,Te))}}function an(i,e){if(i&1){let t=v();o(0,"div",58)(1,"div",59)(2,"mat-icon",60),r(3,"shopping_cart_off"),a(),o(4,"h3",61),r(5,"No hay gastos registrados"),a(),o(6,"p",62),r(7,"Agrega tu primer gasto para llevar un control de tus finanzas."),a(),o(8,"button",63),u("click",function(){f(t);let c=p(2);return C(c.onAdd())}),o(9,"mat-icon"),r(10,"add"),a(),o(11,"span"),r(12,"Agregar Gasto"),a()()()()}}function on(i,e){i&1&&(o(0,"div",64)(1,"div",59),h(2,"mat-spinner",65),o(3,"p",62),r(4,"Cargando gastos..."),a()()())}function rn(i,e){if(i&1&&d(0,an,13,0,"div",56)(1,on,5,0,"div",57),i&2){let t=p();l("ngIf",!t.loading&&(!t.gastos||t.gastos.length===0)),s(),l("ngIf",t.loading)}}var tt=class i{gastos=null;categorias=null;tarjetas=null;loading=!1;editGasto=new T;cloneGasto=new T;deleteGasto=new T;addGasto=new T;paginator;sort;displayedColumns=["descripcion","monto","montoCuota","fechaInicio","recurrencia","cuotas","tarjeta","acciones"];dataSource=new Bt([]);allGastos=[];selectedTarjetaId="";ngOnInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}ngOnChanges(e){e.gastos&&this.gastos&&(this.allGastos=this.gastos,this.applyTarjetaFilter())}onEdit(e){this.editGasto.emit(e)}onClone(e){this.cloneGasto.emit(e)}onDelete(e){this.deleteGasto.emit(e)}onAdd(){this.addGasto.emit()}getCategoriaName(e){let t=this.categorias?.find(n=>n.id===e);return t?t.nombre:"Sin categor\xEDa"}getCategoriaIcon(e){let t=this.categorias?.find(n=>n.id===e);return t?t.icono:"label"}getCategoriaColor(e){let t=this.categorias?.find(n=>n.id===e);return t?t.color:"inherit"}getTarjetaName(e){if(!e)return"-";let t=this.tarjetas?.find(n=>n.id===e);return t?t.nombre:"-"}applyTarjetaFilter(){if(!this.selectedTarjetaId){this.dataSource.data=this.allGastos;return}this.dataSource.data=this.allGastos.filter(e=>e.idTarjeta===this.selectedTarjetaId)}formatCurrency(e){return new Intl.NumberFormat("es-AR",{style:"currency",currency:"ARS"}).format(e)}getRecurrenciaDisplay(e){return e.esGastoFijo?"Gasto Fijo":e.esRecurrente?{MENSUAL:"Mensual",BIMESTRAL:"Bimestral",TRIMESTRAL:"Trimestral",SEMESTRAL:"Semestral",ANUAL:"Anual"}[e.tipoRecurrencia]||"Recurrente":"\xDAnico"}getCuotasDisplay(e){return e.esGastoFijo?"Indefinido":e.cuotasTotales&&e.cuotasTotales>1?`${this.calcularCuotasPagadas(e)}/${e.cuotasTotales}`:"N/A"}calcularCuotasPagadas(e){if(!e.fechaInicio||!e.cuotasTotales)return 0;let[t,n]=e.fechaInicio.split("-").map(Number),c=new Date(t,n-1,1),m=new Date,_=new Date(m.getFullYear(),m.getMonth(),1);if(c>_)return 0;let M=(_.getFullYear()-c.getFullYear())*12+(_.getMonth()-c.getMonth()),b=this.obtenerFrecuenciaMeses(e.tipoRecurrencia),de=Math.floor(M/b)+1;return Math.min(de,e.cuotasTotales)}obtenerFrecuenciaMeses(e){return{SEMANAL:.25,QUINCENAL:.5,MENSUAL:1,BIMESTRAL:2,TRIMESTRAL:3,SEMESTRAL:6,ANUAL:12}[e]||1}isDebitoAutomatico(e){return!!e.esDebitoAutomatico}isActivo(e){return!!e.activo}isGastoFijo(e){return!!e.esGastoFijo}getAumentoDisplay(e){if(!e.esGastoFijo||!e.proyeccionAumento)return"";let t=this.getPeriodicidadDisplay(e.periodicidadAumento);return`+${e.proyeccionAumento}% ${t}`}getPeriodicidadDisplay(e){return{MENSUAL:"mensual",TRIMESTRAL:"trimestral",SEMESTRAL:"semestral",ANUAL:"anual"}[e||"ANUAL"]||"anual"}tieneMontoPersonalizado(e){return!!(e.montosPersonalizados&&e.montosPersonalizados.length>0)}getNumeroMontosPersonalizados(e){return e.montosPersonalizados?e.montosPersonalizados.length:0}getTooltipMontosPersonalizados(e){let t=this.getNumeroMontosPersonalizados(e);return t===1?`${t} mes con monto personalizado`:`${t} meses con montos personalizados`}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=G({type:i,selectors:[["app-gastos-list"]],viewQuery:function(t,n){if(t&1&&(ot(K,5),ot(J,5)),t&2){let c;it(c=rt())&&(n.paginator=c.first),it(c=rt())&&(n.sort=c.first)}},inputs:{gastos:"gastos",categorias:"categorias",tarjetas:"tarjetas",loading:"loading"},outputs:{editGasto:"editGasto",cloneGasto:"cloneGasto",deleteGasto:"deleteGasto",addGasto:"addGasto"},standalone:!1,features:[N],decls:5,vars:3,consts:[["emptyOrLoading",""],[1,"list-container"],["class","filters-bar",4,"ngIf"],["class","table-container",4,"ngIf","ngIfElse"],[1,"filters-bar"],["appearance","outline",2,"width","280px","margin-bottom","12px"],[3,"ngModelChange","ngModel"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],[2,"display","flex","align-items","center","gap","8px"],[1,"table-container"],["mat-table","","matSort","",1,"mat-mdc-table",3,"dataSource"],["matColumnDef","descripcion"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","monto"],["mat-cell","","style","font-weight: 600; color: var(--mat-sys-error);",4,"matCellDef"],["matColumnDef","montoCuota"],["mat-cell","","style","font-weight: 500; color: var(--mat-sys-primary);",4,"matCellDef"],["matColumnDef","fechaInicio"],["matColumnDef","recurrencia"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","cuotas"],["matColumnDef","tarjeta"],["matColumnDef","acciones"],["mat-header-cell","","class","actions-header",4,"matHeaderCellDef"],["mat-cell","","class","actions-cell",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"gasto-fijo-row",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"pageSizeOptions"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[2,"display","flex","align-items","center","gap","12px"],[2,"flex","1"],[2,"font-weight","500"],["class","gasto-fijo-icon","matTooltip","Gasto Fijo con aumentos autom\xE1ticos","style","font-size: 16px; width: 16px; height: 16px; color: #ff9800;",4,"ngIf"],["class","monto-personalizado-icon","style","font-size: 16px; width: 16px; height: 16px; color: #9c27b0;",3,"matTooltip",4,"ngIf"],[2,"font-size","12px","opacity","0.7"],["class","aumento-text",4,"ngIf"],["matTooltip","Gasto Fijo con aumentos autom\xE1ticos",1,"gasto-fijo-icon",2,"font-size","16px","width","16px","height","16px","color","#ff9800"],[1,"monto-personalizado-icon",2,"font-size","16px","width","16px","height","16px","color","#9c27b0",3,"matTooltip"],[1,"aumento-text"],["mat-cell","",2,"font-weight","600","color","var(--mat-sys-error)"],["mat-cell","",2,"font-weight","500","color","var(--mat-sys-primary)"],["mat-header-cell",""],[1,"info-chip"],["style","opacity:0.8;",4,"ngIf"],[2,"opacity","0.8"],["mat-header-cell","",1,"actions-header"],["mat-cell","",1,"actions-cell"],[1,"actions-container"],["mat-icon-button","","color","primary","matTooltip","Editar",1,"action-button",3,"click"],["mat-icon-button","","color","accent","matTooltip","Clonar",1,"action-button",3,"click"],["mat-icon-button","","color","warn","matTooltip","Eliminar",1,"action-button",3,"click"],["mat-header-row",""],["mat-row",""],["class","empty-state",4,"ngIf"],["class","loading-state",4,"ngIf"],[1,"empty-state"],[1,"content-wrapper"],[1,"state-icon"],[1,"title"],[1,"message"],["mat-raised-button","","color","primary",1,"action-button",3,"click"],[1,"loading-state"],["diameter","50"]],template:function(t,n){if(t&1&&(o(0,"div",1),d(1,De,8,2,"div",2)(2,nn,29,5,"div",3)(3,rn,2,2,"ng-template",null,0,F),a()),t&2){let c=O(4);s(),l("ngIf",n.tarjetas&&n.tarjetas.length>0),s(),l("ngIf",!n.loading&&n.dataSource.data.length>0)("ngIfElse",c)}},dependencies:[B,E,H,bt,R,z,I,Dt,zt,At,Rt,Ft,Lt,jt,$t,Nt,Vt,K,J,qt,U,Y,Q,q,j,W,Pt],styles:['@charset "UTF-8";.mat-mdc-chip[_ngcontent-%COMP%]{font-size:12px;padding:4px 8px;min-height:24px;border-radius:12px}.gasto-fijo-chip[_ngcontent-%COMP%]{background-color:#fff3e0!important;color:#e65100!important;border:1px solid #ffb74d!important;font-weight:600!important}.gasto-fijo-chip[_ngcontent-%COMP%]:before{content:"\\1f512  ";font-size:10px}.gasto-fijo-icon[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse-orange 2s infinite}.monto-personalizado-icon[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse-purple 2s infinite}@keyframes _ngcontent-%COMP%_pulse-orange{0%{opacity:1;transform:scale(1)}50%{opacity:.7;transform:scale(1.1)}to{opacity:1;transform:scale(1)}}@keyframes _ngcontent-%COMP%_pulse-purple{0%{opacity:1;transform:scale(1)}50%{opacity:.7;transform:scale(1.1)}to{opacity:1;transform:scale(1)}}.mat-mdc-row.gasto-fijo-row[_ngcontent-%COMP%]{background-color:#ff980005;border-left:3px solid #ff9800}.mat-mdc-row.gasto-fijo-row[_ngcontent-%COMP%]:hover{background-color:#ff98000d}.aumento-text[_ngcontent-%COMP%]{font-size:11px;color:#ff9800;font-weight:500;display:flex;align-items:center;gap:4px}.aumento-text[_ngcontent-%COMP%]:before{content:"\\1f4c8";font-size:10px}']})};function cn(i,e){if(i&1&&(o(0,"div",21)(1,"div",8)(2,"mat-icon"),r(3,"repeat"),a()(),o(4,"div",9)(5,"div",10),r(6),a(),o(7,"div",11),r(8,"Gastos Recurrentes"),a(),o(9,"div",12),r(10,"Con repetici\xF3n autom\xE1tica"),a(),o(11,"div",13)(12,"span"),r(13),a()()()()),i&2){let t=p(2);s(6),g(t.gastosRecurrentes),s(7),x("",t.formatCurrency(t.totalRecurrente)," total")}}function ln(i,e){if(i&1&&(o(0,"div",14)(1,"div",8)(2,"mat-icon"),r(3,"credit_card"),a()(),o(4,"div",9)(5,"div",10),r(6),a(),o(7,"div",11),r(8,"Gastos con Tarjeta"),a(),o(9,"div",12),r(10,"Pagados con tarjeta"),a(),o(11,"div",13)(12,"span"),r(13),a()()()()),i&2){let t=p(2);s(6),g(t.gastosConTarjeta),s(7),x("",t.formatCurrency(t.totalConTarjeta)," total")}}function mn(i,e){if(i&1&&(o(0,"div",22)(1,"div",8)(2,"mat-icon"),r(3,"arrow_upward"),a()(),o(4,"div",9)(5,"div",10),r(6),a(),o(7,"div",11),r(8,"Mayor Gasto"),a(),o(9,"div",12),r(10),a(),o(11,"div",13)(12,"span"),r(13,"Gasto m\xE1s alto registrado"),a()()()()),i&2){let t=p(2);s(6),g(t.formatCurrency(t.topGastos[0].monto)),s(4),g(t.topGastos[0].descripcion)}}function pn(i,e){if(i&1&&(o(0,"div",6)(1,"div",7)(2,"div",8)(3,"mat-icon"),r(4,"trending_down"),a()(),o(5,"div",9)(6,"div",10),r(7),a(),o(8,"div",11),r(9,"Total Gastado"),a(),o(10,"div",12),r(11,"En el per\xEDodo seleccionado"),a(),o(12,"div",13)(13,"span"),r(14),a()()()(),o(15,"div",14)(16,"div",8)(17,"mat-icon"),r(18,"receipt"),a()(),o(19,"div",9)(20,"div",10),r(21),a(),o(22,"div",11),r(23,"Cantidad de Gastos"),a(),o(24,"div",12),r(25,"Transacciones registradas"),a(),o(26,"div",13)(27,"span"),r(28),a()()()(),o(29,"div",15)(30,"div",8)(31,"mat-icon"),r(32,"analytics"),a()(),o(33,"div",9)(34,"div",10),r(35),a(),o(36,"div",11),r(37,"Promedio por Gasto"),a(),o(38,"div",12),r(39,"Gasto promedio"),a(),o(40,"div",13)(41,"span"),r(42,"Por transacci\xF3n"),a()()()(),o(43,"div",16)(44,"div",8)(45,"mat-icon"),r(46,"today"),a()(),o(47,"div",9)(48,"div",10),r(49),a(),o(50,"div",11),r(51,"Promedio Diario"),a(),o(52,"div",12),r(53,"\xDAltimos 30 d\xEDas"),a(),o(54,"div",13)(55,"span"),r(56,"Gasto diario estimado"),a()()()(),d(57,cn,14,2,"div",17)(58,ln,14,2,"div",18),o(59,"div",19)(60,"div",8)(61,"mat-icon"),r(62,"category"),a()(),o(63,"div",9)(64,"div",10),r(65),a(),o(66,"div",11),r(67,"Categor\xEDas Utilizadas"),a(),o(68,"div",12),r(69,"Con gastos registrados"),a(),o(70,"div",13)(71,"span"),r(72),a()()()(),d(73,mn,14,2,"div",20),a()),i&2){let t=p();s(7),g(t.formatCurrency(t.totalGastado)),s(7),x("",t.totalGastos," transacciones"),s(7),g(t.totalGastos),s(7),x("",t.gastos.length," registros"),s(7),g(t.formatCurrency(t.promedioGasto)),s(14),g(t.formatCurrency(t.promedioDiario)),s(8),l("ngIf",t.gastosRecurrentes>0),s(),l("ngIf",t.gastosConTarjeta>0),s(7),g(t.estadisticasCategorias.length),s(7),x("De ",t.categorias.length," disponibles"),s(),l("ngIf",t.topGastos.length>0)}}function dn(i,e){i&1&&(o(0,"div",23),h(1,"mat-spinner",24),o(2,"p"),r(3,"Cargando estad\xEDsticas..."),a()())}function gn(i,e){i&1&&(o(0,"div",25)(1,"mat-icon"),r(2,"receipt"),a(),o(3,"h4"),r(4,"No hay gastos registrados"),a(),o(5,"p"),r(6,"Agrega tu primer gasto para ver las estad\xEDsticas"),a()())}var et=class i{gastos=[];categorias=[];loading=!1;totalGastado=0;totalGastos=0;promedioGasto=0;promedioDiario=0;gastosRecurrentes=0;totalRecurrente=0;gastosConTarjeta=0;totalConTarjeta=0;estadisticasCategorias=[];topGastos=[];estadisticasMensuales=[];ngOnChanges(e){(e.gastos||e.categorias)&&this.calculateStats()}calculateStats(){if(!this.gastos||this.gastos.length===0){this.resetStats();return}this.calculateGeneralStats(),this.calculateCategoriaStats(),this.calculateTopGastos(),this.calculateMonthlyStats()}hasGastos(){return this.gastos&&this.gastos.length>0}resetStats(){this.totalGastado=0,this.totalGastos=0,this.promedioGasto=0,this.promedioDiario=0,this.gastosRecurrentes=0,this.totalRecurrente=0,this.gastosConTarjeta=0,this.totalConTarjeta=0,this.estadisticasCategorias=[],this.topGastos=[],this.estadisticasMensuales=[]}calculateGeneralStats(){this.totalGastos=this.gastos.length,this.totalGastado=this.gastos.reduce((M,b)=>M+this.safeNumber(b.monto),0),this.promedioGasto=this.totalGastos>0?this.totalGastado/this.totalGastos:0;let e=new Date,t=new Date(e.getTime()-720*60*60*1e3),c=this.gastos.filter(M=>new Date(M.fechaInicio)>=t).reduce((M,b)=>M+this.safeNumber(b.monto),0);this.promedioDiario=c/30;let m=this.gastos.filter(M=>M.esRecurrente);this.gastosRecurrentes=m.length,this.totalRecurrente=m.reduce((M,b)=>M+this.safeNumber(b.monto),0);let _=this.gastos.filter(M=>M.idTarjeta);this.gastosConTarjeta=_.length,this.totalConTarjeta=_.reduce((M,b)=>M+this.safeNumber(b.monto),0)}calculateCategoriaStats(){let e=new Map;this.gastos.forEach(t=>{let n=e.get(t.categoriaId)||{total:0,cantidad:0};e.set(t.categoriaId,{total:n.total+t.monto,cantidad:n.cantidad+1})}),this.estadisticasCategorias=Array.from(e.entries()).map(([t,n])=>{let c=this.categorias.find(m=>m.id===t);return c?{categoria:c,total:n.total,cantidad:n.cantidad,promedio:n.cantidad>0?n.total/n.cantidad:0,porcentaje:this.totalGastado>0?n.total/this.totalGastado*100:0}:null}).filter(t=>t!==null).sort((t,n)=>n.total-t.total)}calculateTopGastos(){this.topGastos=[...this.gastos].sort((e,t)=>t.monto-e.monto).slice(0,5)}calculateMonthlyStats(){let e=new Map;this.gastos.forEach(t=>{let n=new Date(t.fechaInicio),c=`${n.getFullYear()}-${String(n.getMonth()+1).padStart(2,"0")}`,m=n.toLocaleDateString("es-AR",{year:"numeric",month:"long"}),_=e.get(c)||{total:0,cantidad:0};e.set(c,{total:_.total+this.safeNumber(t.monto),cantidad:_.cantidad+1})}),this.estadisticasMensuales=Array.from(e.entries()).map(([t,n])=>{let[c,m]=t.split("-");return{mes:new Date(parseInt(c),parseInt(m)-1).toLocaleDateString("es-AR",{year:"numeric",month:"long"}),total:n.total,cantidad:n.cantidad,promedio:n.cantidad>0?n.total/n.cantidad:0}}).sort((t,n)=>n.mes.localeCompare(t.mes)).slice(0,6)}trackByCategoria(e,t){return t.categoria.id}getCategoriaName(e){let t=this.categorias.find(n=>n.id===e);return t?t.nombre:"Sin categor\xEDa"}getCategoriaIcon(e){let t=this.categorias.find(n=>n.id===e);return t?t.icono:"category"}getCategoriaColor(e){let t=this.categorias.find(n=>n.id===e);return t?t.color:"var(--mat-sys-on-surface-variant)"}formatCurrency(e){return new Intl.NumberFormat("es-AR",{style:"currency",currency:"ARS",minimumFractionDigits:0,maximumFractionDigits:0}).format(e)}safeNumber(e){let t=Number(e);return Number.isFinite(t)?t:0}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=G({type:i,selectors:[["app-gastos-stats"]],inputs:{gastos:"gastos",categorias:"categorias"},standalone:!1,features:[N],decls:13,vars:6,consts:[["loadingTemplate",""],[1,"prestamo-stats"],[1,"stats-header"],["mat-icon-button","",3,"click","disabled"],["class","stats-grid",4,"ngIf","ngIfElse"],["class","stats-empty",4,"ngIf"],[1,"stats-grid"],[1,"stat-card","danger"],[1,"stat-icon"],[1,"stat-content"],[1,"stat-value"],[1,"stat-label"],[1,"stat-description"],[1,"stat-trend"],[1,"stat-card","warning"],[1,"stat-card","info"],[1,"stat-card","secondary"],["class","stat-card primary",4,"ngIf"],["class","stat-card warning",4,"ngIf"],[1,"stat-card","success"],["class","stat-card pending",4,"ngIf"],[1,"stat-card","primary"],[1,"stat-card","pending"],[1,"stats-loading"],["diameter","40"],[1,"stats-empty"]],template:function(t,n){if(t&1){let c=v();o(0,"div",1)(1,"div",2)(2,"h3")(3,"mat-icon"),r(4,"analytics"),a(),r(5," Estad\xEDsticas de Gastos "),a(),o(6,"button",3),u("click",function(){return f(c),C(n.calculateStats())}),o(7,"mat-icon"),r(8,"refresh"),a()()(),d(9,pn,74,11,"div",4)(10,dn,4,0,"ng-template",null,0,F)(12,gn,7,0,"div",5),a()}if(t&2){let c=O(11);s(6),l("disabled",n.loading),s(),A("spinning",n.loading),s(2),l("ngIf",!n.loading&&n.hasGastos())("ngIfElse",c),s(3),l("ngIf",!n.loading&&!n.hasGastos())}},dependencies:[E,z,I,j],styles:['.prestamo-stats[_ngcontent-%COMP%]{padding:16px;background-color:var(--mat-sys-surface-container-low);border-radius:8px;border:1px solid var(--mat-sys-outline-variant)}.stats-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px}.stats-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;display:flex;align-items:center;gap:8px;color:var(--mat-sys-primary);font-weight:500;font-size:18px}.stats-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{font-size:24px;width:24px;height:24px}.stats-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{transition:transform .3s ease}.stats-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .mat-icon.spinning[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:16px}@media (min-width: 1200px){.stats-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(4,1fr)}}@media (max-width: 768px){.stats-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:12px}}.stat-card[_ngcontent-%COMP%]{background:var(--mat-sys-surface-container-low);border-radius:12px;padding:20px;box-shadow:var(--mat-sys-elevation-level2);border:1px solid var(--mat-sys-outline-variant);transition:all .3s ease;position:relative;overflow:hidden;display:flex;align-items:flex-start;gap:16px}.stat-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:var(--mat-sys-elevation-level3)}.stat-card[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;height:4px;background:var(--mat-sys-outline-variant)}.stat-card.primary[_ngcontent-%COMP%]:before{background:var(--mat-sys-primary)}.stat-card.secondary[_ngcontent-%COMP%]:before{background:var(--mat-sys-secondary)}.stat-card.info[_ngcontent-%COMP%]:before{background:var(--mat-sys-info)}.stat-card.success[_ngcontent-%COMP%]:before{background:var(--mat-sys-success)}.stat-card.warning[_ngcontent-%COMP%]:before{background:var(--mat-sys-warning)}.stat-card.danger[_ngcontent-%COMP%]:before{background:var(--mat-sys-error)}.stat-card.alert[_ngcontent-%COMP%]:before{background:var(--mat-sys-error)}.stat-card.pending[_ngcontent-%COMP%]:before{background:var(--mat-sys-tertiary)}.stat-icon[_ngcontent-%COMP%]{flex-shrink:0;width:48px;height:48px;border-radius:12px;display:flex;align-items:center;justify-content:center;background-color:var(--mat-sys-surface-variant)}.stat-icon[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{font-size:24px;width:24px;height:24px;color:var(--mat-sys-on-surface-variant)}.primary[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{background-color:var(--mat-sys-primary-container)}.primary[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{color:var(--mat-sys-on-primary-container)}.secondary[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{background-color:var(--mat-sys-secondary-container)}.secondary[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{color:var(--mat-sys-on-secondary-container)}.info[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{background-color:var(--mat-sys-info-container)}.info[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{color:var(--mat-sys-on-info-container)}.success[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{background-color:var(--mat-sys-success-container)}.success[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{color:var(--mat-sys-on-success-container)}.warning[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{background-color:var(--mat-sys-warning-container)}.warning[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{color:var(--mat-sys-on-warning-container)}.danger[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{background-color:var(--mat-sys-error-container)}.danger[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{color:var(--mat-sys-on-error-container)}.alert[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{background-color:var(--mat-sys-error-container)}.alert[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{color:var(--mat-sys-on-error-container)}.pending[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{background-color:var(--mat-sys-tertiary-container)}.pending[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{color:var(--mat-sys-on-tertiary-container)}.stat-content[_ngcontent-%COMP%]{flex:1;min-width:0}.stat-value[_ngcontent-%COMP%]{font-size:24px;font-weight:700;color:var(--mat-sys-on-surface);margin-bottom:4px;line-height:1.2}@media (max-width: 480px){.stat-value[_ngcontent-%COMP%]{font-size:20px}}.stat-label[_ngcontent-%COMP%]{font-size:14px;color:var(--mat-sys-on-surface-variant);font-weight:500;margin-bottom:4px;text-transform:uppercase;letter-spacing:.5px}.stat-description[_ngcontent-%COMP%]{font-size:12px;color:var(--mat-sys-outline);margin-bottom:8px;font-style:italic;line-height:1.3}.stat-trend[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;font-size:12px;color:var(--mat-sys-outline)}.stat-trend[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px}.stat-trend.positive[_ngcontent-%COMP%], .stat-trend.positive[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{color:var(--mat-sys-success)}.stat-trend.warning[_ngcontent-%COMP%], .stat-trend.warning[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{color:var(--mat-sys-warning)}.stat-progress[_ngcontent-%COMP%]{margin:8px 0}.stat-progress[_ngcontent-%COMP%]   .mat-progress-bar[_ngcontent-%COMP%]{height:6px;border-radius:3px}.stat-progress[_ngcontent-%COMP%]   .mat-progress-bar[_ngcontent-%COMP%]     .mat-progress-bar-fill:after{background-color:var(--mat-sys-success)}.stat-progress[_ngcontent-%COMP%]   .mat-progress-bar[_ngcontent-%COMP%]     .mat-progress-bar-buffer{background-color:var(--mat-sys-outline-variant)}.alert-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px;margin-top:8px}.alert-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;font-size:12px}.alert-item[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{font-size:14px;width:14px;height:14px}.alert-item[_ngcontent-%COMP%]   .mat-icon.danger[_ngcontent-%COMP%]{color:var(--mat-sys-error)}.alert-item[_ngcontent-%COMP%]   .mat-icon.warning[_ngcontent-%COMP%]{color:var(--mat-sys-warning)}.stats-loading[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px 20px;text-align:center}.stats-loading[_ngcontent-%COMP%]   .mat-spinner[_ngcontent-%COMP%]{margin-bottom:16px}.stats-loading[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:var(--mat-sys-on-surface-variant);font-size:14px}.stats-empty[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px 20px;text-align:center;color:var(--mat-sys-on-surface-variant)}.stats-empty[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px;margin-bottom:16px;color:var(--mat-sys-outline)}.stats-empty[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 8px;font-size:18px;font-weight:500}.stats-empty[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:14px;color:var(--mat-sys-outline)}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.stat-card[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp .3s ease-out}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@media (max-width: 768px){.prestamo-stats[_ngcontent-%COMP%]{padding:12px}.stats-header[_ngcontent-%COMP%]{margin-bottom:16px}.stats-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:16px}.stats-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px}.stat-card[_ngcontent-%COMP%]{padding:16px;gap:12px}.stat-icon[_ngcontent-%COMP%]{width:40px;height:40px}.stat-icon[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px}.stat-value[_ngcontent-%COMP%]{font-size:20px}.stat-label[_ngcontent-%COMP%]{font-size:12px}.stat-trend[_ngcontent-%COMP%]{font-size:11px}.stat-trend[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{font-size:14px;width:14px;height:14px}}@media (max-width: 480px){.prestamo-stats[_ngcontent-%COMP%]{padding:8px}.stats-header[_ngcontent-%COMP%]{margin-bottom:12px;flex-direction:column;align-items:flex-start;gap:8px}.stats-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:15px}.stat-card[_ngcontent-%COMP%]{padding:12px;gap:10px}.stat-card[_ngcontent-%COMP%]:hover{transform:none}.stat-icon[_ngcontent-%COMP%]{width:36px;height:36px}.stat-icon[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px}.stat-value[_ngcontent-%COMP%]{font-size:18px}.stat-label[_ngcontent-%COMP%]{font-size:11px;margin-bottom:6px}.stat-trend[_ngcontent-%COMP%]{font-size:10px}.stat-trend[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{font-size:12px;width:12px;height:12px}.alert-details[_ngcontent-%COMP%]{gap:2px}.alert-item[_ngcontent-%COMP%]{font-size:10px}.alert-item[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{font-size:12px;width:12px;height:12px}}.stat-card[_ngcontent-%COMP%]:focus-within{outline:2px solid var(--mat-sys-primary);outline-offset:2px}.stats-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{outline:2px solid var(--mat-sys-primary);outline-offset:2px}.stat-card[_ngcontent-%COMP%], .stat-icon[_ngcontent-%COMP%], .stat-value[_ngcontent-%COMP%], .stat-label[_ngcontent-%COMP%], .stat-trend[_ngcontent-%COMP%]{transition:all .2s ease}.stat-value.negative[_ngcontent-%COMP%]{color:var(--mat-sys-error)}.stat-value.positive[_ngcontent-%COMP%]{color:var(--mat-sys-success)}.stat-value.warning[_ngcontent-%COMP%]{color:var(--mat-sys-warning)}.stat-card.pulsing[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse 2s infinite}@keyframes _ngcontent-%COMP%_pulse{0%{box-shadow:var(--mat-sys-elevation-level2)}50%{box-shadow:var(--mat-sys-elevation-level4)}to{box-shadow:var(--mat-sys-elevation-level2)}}.stat-card[title][_ngcontent-%COMP%]{cursor:help}.stat-card[_ngcontent-%COMP%]{will-change:transform,box-shadow}.stat-icon[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{will-change:transform}']})};var dt=()=>[],_n=()=>({});function fn(i,e){i&1&&(o(0,"div",12),h(1,"mat-spinner",13),o(2,"p"),r(3,"Cargando gastos..."),a()())}var nt=class i{constructor(e,t,n){this.appStateService=e;this.dialog=t;this.snackBar=n;this.gastos$=this.appStateService.recurringExpenses$,this.categorias$=this.appStateService.categories$,this.currentMonth$=this.appStateService.currentMonth$,this.loading$=this.appStateService.loading$,this.tarjetas$=this.appStateService.tarjetas$,this.filteredGastos$=at([this.gastos$,this.categorias$]).pipe(L(([c,m])=>this.filterGastos(c,m))),this.gastosCounts$=this.gastos$.pipe(L(c=>{let m={};return c.forEach(_=>{m[_.categoriaId]=(m[_.categoriaId]||0)+1}),m}))}destroy$=new ut;gastos$;categorias$;currentMonth$;loading$;filteredGastos$;tarjetas$;selectedCategoria=null;searchTerm="";gastosCounts$;ngOnInit(){this.refreshData()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}refreshData(){}openGastoDialog(e){this.dialog.open(st,{width:"80vw",maxHeight:"80vh",panelClass:"unified-modal-panel",data:{gasto:e||null,title:e?"Editar Gasto":"Nuevo Gasto"},disableClose:!0}).afterClosed().subscribe(n=>{n===!0&&this.snackBar.open(e?"Gasto actualizado exitosamente":"Gasto agregado exitosamente","Cerrar",{duration:3e3,panelClass:["success-snackbar"]})})}addGasto(e){let t=gt({id:this.generateId()},e);this.appStateService.addRecurringExpense(t),this.snackBar.open("Gasto agregado exitosamente","Cerrar",{duration:3e3,panelClass:["success-snackbar"]})}updateGasto(e){this.appStateService.updateRecurringExpense(e),this.snackBar.open("Gasto actualizado exitosamente","Cerrar",{duration:3e3,panelClass:["success-snackbar"]})}deleteGasto(e){confirm("\xBFEst\xE1 seguro de que desea eliminar este gasto?")&&(this.appStateService.deleteRecurringExpense(e),this.snackBar.open("Gasto eliminado exitosamente","Cerrar",{duration:3e3,panelClass:["success-snackbar"]}))}duplicateGasto(e){this.dialog.open(st,{width:"80vw",maxHeight:"80vh",panelClass:"unified-modal-panel",data:{gasto:e,title:"Duplicar Gasto",mode:"create"},disableClose:!0}).afterClosed().subscribe(n=>{n===!0&&this.snackBar.open("Gasto duplicado exitosamente","Cerrar",{duration:3e3,panelClass:["success-snackbar"]})})}onCategoriaFilterChange(e){this.selectedCategoria=e}onSearchChange(e){this.searchTerm=e}filterGastos(e,t){let n=[...e];if(this.selectedCategoria&&(n=n.filter(c=>c.categoriaId===this.selectedCategoria)),this.searchTerm.trim()){let c=this.searchTerm.toLowerCase();n=n.filter(m=>m.descripcion.toLowerCase().includes(c)||m.monto.toString().includes(c)||this.getCategoriaName(m.categoriaId,t).toLowerCase().includes(c))}return n}getCategoriaName(e,t){let n=t.find(c=>c.id===e);return n?n.nombre:"Sin categor\xEDa"}showSnackBar(e,t){this.snackBar.open(e,"Cerrar",{duration:3e3,panelClass:`${t}-snackbar`,horizontalPosition:"end",verticalPosition:"top"})}formatCurrency(e){return new Intl.NumberFormat("es-AR",{style:"currency",currency:"ARS",minimumFractionDigits:0,maximumFractionDigits:0}).format(e)}getTotalGastos(e){return e?e.reduce((t,n)=>t+n.monto,0):0}generateId(){return Date.now().toString(36)+Math.random().toString(36).substr(2)}onFilterChange(e){this.selectedCategoria=e.categorias?.length===1?e.categorias[0]:null,this.searchTerm=e.search||"",this.filteredGastos$=at([this.gastos$,this.categorias$]).pipe(L(([t,n])=>this.filterGastos(t,n)))}static \u0275fac=function(t){return new(t||i)(V(le),V(Xt),V(Zt))};static \u0275cmp=G({type:i,selectors:[["app-gastos"]],standalone:!1,decls:28,vars:31,consts:[[1,"gastos-container"],[1,"prestamos-header"],[1,"header-content"],[1,"page-title"],[1,"page-subtitle"],[1,"header-actions"],["mat-raised-button","","color","primary",3,"click"],[3,"gastos","categorias"],[3,"filterChange","categorias","gastosCounts"],[1,"gastos-content"],[3,"editGasto","cloneGasto","deleteGasto","addGasto","gastos","categorias","tarjetas","loading"],["class","loading-overlay",4,"ngIf"],[1,"loading-overlay"],["diameter","50"]],template:function(t,n){t&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3)(4,"mat-icon"),r(5,"shopping_cart"),a(),r(6," Gesti\xF3n de Gastos "),a(),o(7,"p",4),r(8," Controla y categoriza todos tus gastos mensuales "),a()(),o(9,"div",5)(10,"button",6),u("click",function(){return n.openGastoDialog()}),o(11,"mat-icon"),r(12,"add"),a(),r(13," Nuevo Gasto "),a()()(),h(14,"app-gastos-stats",7),P(15,"async"),P(16,"async"),o(17,"app-gastos-categoria-filter",8),P(18,"async"),P(19,"async"),u("filterChange",function(m){return n.onFilterChange(m)}),a(),o(20,"div",9)(21,"app-gastos-list",10),P(22,"async"),P(23,"async"),P(24,"async"),P(25,"async"),u("editGasto",function(m){return n.openGastoDialog(m)})("cloneGasto",function(m){return n.duplicateGasto(m)})("deleteGasto",function(m){return n.deleteGasto(m)})("addGasto",function(){return n.openGastoDialog()}),a()(),d(26,fn,4,0,"div",11),P(27,"async"),a()),t&2&&(s(14),l("gastos",y(15,9,n.gastos$)||k(27,dt))("categorias",y(16,11,n.categorias$)||k(28,dt)),s(3),l("categorias",y(18,13,n.categorias$)||k(29,dt))("gastosCounts",y(19,15,n.gastosCounts$)||k(30,_n)),s(4),l("gastos",y(22,17,n.filteredGastos$))("categorias",y(23,19,n.categorias$))("tarjetas",y(24,21,n.tarjetas$))("loading",y(25,23,n.loading$)||!1),s(5),l("ngIf",y(27,25,n.loading$)))},dependencies:[E,R,I,j,tt,X,et,vt],styles:[".gastos-container[_ngcontent-%COMP%]{padding:24px;max-width:1400px;margin:0 auto;min-height:calc(100vh - 64px);background-color:var(--mat-sys-surface-dim);position:relative;animation:_ngcontent-%COMP%_fadeIn .6s ease-out}@media (max-width: 768px){.gastos-container[_ngcontent-%COMP%]{padding:16px}}@media (max-width: 480px){.gastos-container[_ngcontent-%COMP%]{padding:12px}}.prestamos-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:32px;padding:24px;background:var(--mat-sys-surface-container-low);border-radius:16px;box-shadow:0 2px 12px var(--mat-sys-shadow);border:1px solid var(--mat-sys-outline-variant);animation:_ngcontent-%COMP%_slideInDown .6s ease-out}@media (max-width: 768px){.prestamos-header[_ngcontent-%COMP%]{flex-direction:column;gap:20px;align-items:stretch;padding:20px}}.header-content[_ngcontent-%COMP%]{flex:1}.page-title[_ngcontent-%COMP%]{margin:0 0 8px;font-size:28px;font-weight:700;color:var(--mat-sys-on-surface);display:flex;align-items:center;gap:12px}.page-title[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{font-size:32px;width:32px;height:32px;color:var(--mat-sys-primary)}@media (max-width: 768px){.page-title[_ngcontent-%COMP%]{font-size:24px}.page-title[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{font-size:28px;width:28px;height:28px}}.page-subtitle[_ngcontent-%COMP%]{margin:0;font-size:16px;color:var(--mat-sys-on-surface-variant);line-height:1.5}@media (max-width: 768px){.page-subtitle[_ngcontent-%COMP%]{font-size:14px}}.header-actions[_ngcontent-%COMP%]{display:flex;gap:12px;flex-shrink:0}@media (max-width: 768px){.header-actions[_ngcontent-%COMP%]{flex-direction:column;gap:8px}}@media (max-width: 480px){.header-actions[_ngcontent-%COMP%]{flex-direction:row;gap:8px}.header-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;font-size:13px}.header-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px}}.gastos-summary[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:20px;margin-bottom:32px;animation:_ngcontent-%COMP%_slideInUp .6s ease-out .1s both}@media (max-width: 768px){.gastos-summary[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:16px;margin-bottom:24px}}@media (max-width: 480px){.gastos-summary[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:12px}}.gastos-summary[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]{border-radius:12px;box-shadow:0 2px 12px #00000014;transition:all .3s ease;border:1px solid var(--mat-sys-outline-variant)}.gastos-summary[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 20px #0000001f;transform:translateY(-2px)}.gastos-summary[_ngcontent-%COMP%]   .summary-card.total[_ngcontent-%COMP%]{border-left:4px solid var(--mat-sys-error)}.gastos-summary[_ngcontent-%COMP%]   .summary-card.total[_ngcontent-%COMP%]   .summary-icon[_ngcontent-%COMP%]{color:var(--mat-sys-error);background-color:var(--mat-sys-error-container)}.gastos-summary[_ngcontent-%COMP%]   .summary-card.count[_ngcontent-%COMP%]{border-left:4px solid var(--mat-sys-info)}.gastos-summary[_ngcontent-%COMP%]   .summary-card.count[_ngcontent-%COMP%]   .summary-icon[_ngcontent-%COMP%]{color:var(--mat-sys-info);background-color:var(--mat-sys-info-container)}.gastos-summary[_ngcontent-%COMP%]   .summary-card.average[_ngcontent-%COMP%]{border-left:4px solid var(--mat-sys-warning)}.gastos-summary[_ngcontent-%COMP%]   .summary-card.average[_ngcontent-%COMP%]   .summary-icon[_ngcontent-%COMP%]{color:var(--mat-sys-warning);background-color:var(--mat-sys-warning-container)}.gastos-summary[_ngcontent-%COMP%]   .summary-card.category[_ngcontent-%COMP%]{border-left:4px solid var(--mat-sys-secondary)}.gastos-summary[_ngcontent-%COMP%]   .summary-card.category[_ngcontent-%COMP%]   .summary-icon[_ngcontent-%COMP%]{color:var(--mat-sys-secondary);background-color:var(--mat-sys-secondary-container)}.gastos-summary[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{padding:20px}@media (max-width: 480px){.gastos-summary[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{padding:16px}}.gastos-summary[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .summary-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin-bottom:16px}.gastos-summary[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .summary-header[_ngcontent-%COMP%]   .summary-icon[_ngcontent-%COMP%]{padding:8px;border-radius:8px;font-size:1.2rem;width:1.2rem;height:1.2rem}.gastos-summary[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .summary-header[_ngcontent-%COMP%]   .summary-label[_ngcontent-%COMP%]{font-size:.9rem;font-weight:500;color:var(--mat-sys-on-surface-variant);text-transform:uppercase;letter-spacing:.5px}.gastos-summary[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .summary-value[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:600;color:var(--mat-sys-on-surface);margin-bottom:8px;line-height:1.2}.gastos-summary[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .summary-value.category-name[_ngcontent-%COMP%]{font-size:1.4rem;text-transform:capitalize}@media (max-width: 768px){.gastos-summary[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .summary-value[_ngcontent-%COMP%]{font-size:1.6rem}.gastos-summary[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .summary-value.category-name[_ngcontent-%COMP%]{font-size:1.2rem}}.gastos-summary[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .summary-subtitle[_ngcontent-%COMP%]{font-size:.8rem;color:var(--mat-sys-outline);font-weight:400}.gastos-content[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideInUp .6s ease-out .2s both}.gastos-content[_ngcontent-%COMP%]   .gastos-tabs[_ngcontent-%COMP%]   .mat-mdc-tab-group[_ngcontent-%COMP%]{border-radius:12px;overflow:hidden;box-shadow:0 2px 12px #00000014}.gastos-content[_ngcontent-%COMP%]   .gastos-tabs[_ngcontent-%COMP%]   .mat-mdc-tab-header[_ngcontent-%COMP%]{border-bottom:1px solid var(--mat-sys-outline-variant);background-color:var(--mat-sys-surface-container-low)}.gastos-content[_ngcontent-%COMP%]   .gastos-tabs[_ngcontent-%COMP%]   .mat-mdc-tab[_ngcontent-%COMP%]{min-width:120px;font-weight:500}.gastos-content[_ngcontent-%COMP%]   .gastos-tabs[_ngcontent-%COMP%]   .mat-mdc-tab.mat-mdc-tab-active[_ngcontent-%COMP%]   .mdc-tab__text-label[_ngcontent-%COMP%]{color:var(--mat-sys-primary)}.gastos-content[_ngcontent-%COMP%]   .gastos-tabs[_ngcontent-%COMP%]   .mat-mdc-tab-body-wrapper[_ngcontent-%COMP%]{background-color:var(--mat-sys-surface)}.gastos-content[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]{padding:24px;min-height:400px}@media (max-width: 768px){.gastos-content[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]{padding:16px}}@media (max-width: 480px){.gastos-content[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]{padding:12px}}.gastos-content[_ngcontent-%COMP%]   .tab-content.analysis-tab[_ngcontent-%COMP%]   .analysis-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(400px,1fr));gap:24px}@media (max-width: 768px){.gastos-content[_ngcontent-%COMP%]   .tab-content.analysis-tab[_ngcontent-%COMP%]   .analysis-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:16px}}.gastos-content[_ngcontent-%COMP%]   .tab-content.analysis-tab[_ngcontent-%COMP%]   .analysis-grid[_ngcontent-%COMP%]   .chart-card[_ngcontent-%COMP%]{border-radius:12px;box-shadow:0 2px 12px #00000014}.gastos-content[_ngcontent-%COMP%]   .tab-content.analysis-tab[_ngcontent-%COMP%]   .analysis-grid[_ngcontent-%COMP%]   .chart-card.full-width[_ngcontent-%COMP%]{grid-column:1/-1}.gastos-content[_ngcontent-%COMP%]   .tab-content.analysis-tab[_ngcontent-%COMP%]   .analysis-grid[_ngcontent-%COMP%]   .chart-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{padding-bottom:16px}.gastos-content[_ngcontent-%COMP%]   .tab-content.analysis-tab[_ngcontent-%COMP%]   .analysis-grid[_ngcontent-%COMP%]   .chart-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:1.1rem;font-weight:500}.gastos-content[_ngcontent-%COMP%]   .tab-content.analysis-tab[_ngcontent-%COMP%]   .analysis-grid[_ngcontent-%COMP%]   .chart-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:var(--mat-sys-primary)}.gastos-content[_ngcontent-%COMP%]   .tab-content.analysis-tab[_ngcontent-%COMP%]   .analysis-grid[_ngcontent-%COMP%]   .chart-card[_ngcontent-%COMP%]   .chart-placeholder[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 20px;text-align:center;color:var(--mat-sys-outline);background-color:var(--mat-sys-surface-container-low);border-radius:8px;border:2px dashed var(--mat-sys-outline-variant)}.gastos-content[_ngcontent-%COMP%]   .tab-content.analysis-tab[_ngcontent-%COMP%]   .analysis-grid[_ngcontent-%COMP%]   .chart-card[_ngcontent-%COMP%]   .chart-placeholder[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:3rem;width:3rem;height:3rem;margin-bottom:16px;opacity:.5}.gastos-content[_ngcontent-%COMP%]   .tab-content.analysis-tab[_ngcontent-%COMP%]   .analysis-grid[_ngcontent-%COMP%]   .chart-card[_ngcontent-%COMP%]   .chart-placeholder[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 8px;font-size:1rem;font-weight:500}.gastos-content[_ngcontent-%COMP%]   .tab-content.analysis-tab[_ngcontent-%COMP%]   .analysis-grid[_ngcontent-%COMP%]   .chart-card[_ngcontent-%COMP%]   .chart-placeholder[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:.8rem;opacity:.7}.gastos-content[_ngcontent-%COMP%]   .search-bar[_ngcontent-%COMP%]{margin-bottom:24px}.gastos-content[_ngcontent-%COMP%]   .search-bar[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]{width:100%;max-width:400px}@media (max-width: 768px){.gastos-content[_ngcontent-%COMP%]   .search-bar[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]{max-width:100%}}.loading-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background-color:#fffc;display:flex;align-items:center;justify-content:center;z-index:1000;-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px)}.loading-overlay[_ngcontent-%COMP%]   .loading-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:16px;padding:32px;background-color:var(--mat-sys-surface);border-radius:12px;box-shadow:0 4px 20px #00000026}.loading-overlay[_ngcontent-%COMP%]   .loading-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:var(--mat-sys-on-surface-variant);font-weight:500}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_slideInDown{0%{opacity:0;transform:translateY(-30px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_slideInUp{0%{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.prestamos-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{transition:all .3s ease}.prestamos-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:var(--mat-sys-elevation-level2)}@media (prefers-reduced-motion: reduce){.gastos-container[_ngcontent-%COMP%], .prestamos-header[_ngcontent-%COMP%], .gastos-summary[_ngcontent-%COMP%], .gastos-content[_ngcontent-%COMP%]{animation:none}.prestamos-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{transition:none}.prestamos-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{transform:none}}  .gastos-snackbar.success{--mdc-snackbar-container-color: var(--mat-sys-success);--mdc-snackbar-supporting-text-color: white}  .gastos-snackbar.error{--mdc-snackbar-container-color: var(--mat-sys-error);--mdc-snackbar-supporting-text-color: white}  .gastos-snackbar.warning{--mdc-snackbar-container-color: var(--mat-sys-warning);--mdc-snackbar-supporting-text-color: white}@media (max-width: 1200px){.gastos-container[_ngcontent-%COMP%]{max-width:100%}}@media (max-width: 768px){.gastos-summary[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .summary-value[_ngcontent-%COMP%]{font-size:1.5rem}}@media (max-width: 480px){.gastos-summary[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .summary-header[_ngcontent-%COMP%]   .summary-label[_ngcontent-%COMP%]{font-size:.8rem}.gastos-summary[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .summary-value[_ngcontent-%COMP%]{font-size:1.4rem}.gastos-summary[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .summary-subtitle[_ngcontent-%COMP%]{font-size:.75rem}}"]})};var pe=class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=ft({type:i});static \u0275inj=_t({imports:[Ot,Tt,It,se,ce.forChild([{path:"",component:nt}])]})};export{pe as GastosModule};
