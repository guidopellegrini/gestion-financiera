import{A as B,B as q,C as _t,D as U,E as Y,F as H,I as Ct,J as ft,K as Mt,L as Pt,P as Q,T as ht,U as Ot,W as vt,ia as bt,ma as J,xa as yt,za as Et}from"./chunk-YJA7LBCE.js";import{Ea as c,F as at,Fa as o,Ga as e,Ha as C,Kb as E,La as rt,Lb as z,Ma as st,Nb as mt,Oa as y,P as v,Q as x,Qa as f,Qb as lt,Ra as u,Tb as S,_b as F,ab as Z,ac as p,bb as tt,db as a,dc as I,ea as s,eb as P,ec as T,fb as h,gb as ct,h as ot,ia as M,ic as A,jc as w,lc as D,ma as b,mc as dt,md as V,nc as gt,oc as G,pb as O,pc as pt,qa as d,qb as et,qc as N,rb as nt,rc as ut,rd as $,sa as it,tc as R,td as L,uc as j,vc as k,vd as xt}from"./chunk-JUX2TMYD.js";function Gt(r,t){if(r&1&&(o(0,"mat-error"),a(1),e()),r&2){let n=u().index,i=u();s(),h(" ",i.getErrorMessage(n,"mes")," ")}}function Nt(r,t){r&1&&(o(0,"mat-error"),a(1," Este mes ya est\xE1 configurado "),e())}function Rt(r,t){if(r&1&&(o(0,"mat-error"),a(1),e()),r&2){let n=u().index,i=u();s(),h(" ",i.getErrorMessage(n,"monto")," ")}}function jt(r,t){if(r&1&&(o(0,"div",30)(1,"div",31)(2,"span",32),a(3,"Monto base calculado:"),e(),o(4,"span",33),a(5),O(6,"number"),e()(),o(7,"div",31)(8,"span",32),a(9,"Diferencia:"),e(),o(10,"span",34),a(11),O(12,"number"),e()()()),r&2){let n,i,l,m,g=u().$implicit,_=u();s(5),h(" $",nt(6,7,_.calcularMontoBase((n=g.get("mes"))==null?null:n.value),"1.2-2")," "),s(5),tt("positive",(((i=g.get("monto"))==null?null:i.value)||0)>_.calcularMontoBase((i=g.get("mes"))==null?null:i.value))("negative",(((l=g.get("monto"))==null?null:l.value)||0)<_.calcularMontoBase((l=g.get("mes"))==null?null:l.value)),s(),ct(" ",(((m=g.get("monto"))==null?null:m.value)||0)-_.calcularMontoBase((m=g.get("mes"))==null?null:m.value)>=0?"+":"","$",nt(12,10,(((m=g.get("monto"))==null?null:m.value)||0)-_.calcularMontoBase((m=g.get("mes"))==null?null:m.value),"1.2-2")," ")}}function kt(r,t){if(r&1){let n=y();o(0,"div",15)(1,"div",16)(2,"div",17)(3,"div",18)(4,"mat-form-field",19)(5,"mat-label"),a(6,"Seleccionar Mes"),e(),o(7,"input",20),f("click",function(l){return v(n),x(l.target.showPicker())}),e(),o(8,"mat-icon",21),a(9,"calendar_today"),e(),d(10,Gt,2,1,"mat-error",22)(11,Nt,2,0,"mat-error",22),e(),o(12,"mat-form-field",19)(13,"mat-label"),a(14,"Monto"),e(),C(15,"input",23),o(16,"span",24),a(17,"$\xA0"),e(),d(18,Rt,2,1,"mat-error",22),e(),o(19,"div",25)(20,"button",26),f("click",function(){let l=v(n).index,m=u();return x(m.eliminarMontoPersonalizado(l))}),o(21,"mat-icon"),a(22,"delete"),e()()()(),o(23,"div",18)(24,"mat-form-field",27)(25,"mat-label"),a(26,"Notas (opcional)"),e(),C(27,"textarea",28),e()(),d(28,jt,13,13,"div",29),e()()()}if(r&2){let n,i,l,m,g,_=t.$implicit,W=t.index,X=u();c("formGroupName",W),s(7),tt("error",X.esMesDuplicado(W,(n=_.get("mes"))==null?null:n.value)),s(3),c("ngIf",(i=_.get("mes"))==null?null:i.errors),s(),c("ngIf",X.esMesDuplicado(W,(l=_.get("mes"))==null?null:l.value)),s(7),c("ngIf",(m=_.get("monto"))==null?null:m.errors),s(10),c("ngIf",((g=_.get("mes"))==null?null:g.value)&&X.gasto)}}function Vt(r,t){r&1&&(o(0,"div",35)(1,"mat-icon",36),a(2,"event_note"),e(),o(3,"div",37)(4,"h4",38),a(5,"No hay montos personalizados configurados"),e(),o(6,"p",39),a(7,"Agregue excepciones para meses espec\xEDficos donde necesite un monto diferente al calculado autom\xE1ticamente"),e()()())}function $t(r,t){r&1&&(o(0,"div",40)(1,"div",41)(2,"div",42)(3,"mat-icon",43),a(4,"info"),e(),o(5,"h4",44),a(6,"Informaci\xF3n importante"),e()(),o(7,"div",45)(8,"ul",46)(9,"li"),a(10,"Los montos personalizados tienen prioridad sobre el c\xE1lculo autom\xE1tico"),e(),o(11,"li"),a(12,"Seleccione el mes usando el selector de fecha"),e(),o(13,"li"),a(14,"Cada mes solo puede tener un monto personalizado"),e(),o(15,"li"),a(16,"Los montos deben ser mayores o iguales a cero"),e()()()()())}var K=class r{constructor(t,n){this.fb=t;this.calculationsService=n;this.form=this.createForm()}gasto=null;montosPersonalizados=[];montosPersonalizadosChange=new it;form;destroy$=new ot;ngOnInit(){this.setupFormSubscriptions(),this.loadMontosPersonalizados()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}createForm(){return this.fb.group({montosPersonalizados:this.fb.array([])})}setupFormSubscriptions(){this.montosPersonalizadosArray.valueChanges.pipe(at(this.destroy$)).subscribe(t=>{this.montosPersonalizadosChange.emit(t)})}loadMontosPersonalizados(){this.montosPersonalizadosArray.clear(),this.montosPersonalizados.forEach(t=>{this.montosPersonalizadosArray.push(this.createMontoPersonalizadoGroup(t))})}get montosPersonalizadosArray(){return this.form.get("montosPersonalizados")}createMontoPersonalizadoGroup(t){return this.fb.group({mes:[t?.mes||"",[p.required,this.validarFormatoMes.bind(this)]],monto:[t?.monto||0,[p.required,p.min(0),p.max(999999999)]],notas:[t?.notas||""]})}agregarMontoPersonalizado(){let t=this.createMontoPersonalizadoGroup();this.montosPersonalizadosArray.push(t)}eliminarMontoPersonalizado(t){this.montosPersonalizadosArray.removeAt(t)}calcularMontoBase(t){return!this.gasto||!t?0:this.calculationsService.calcularMontoBaseSinPersonalizacion(this.gasto,t)}validarFormatoMes(t){let n=t.value;if(!n)return null;if(!/^\d{4}-\d{2}$/.test(n))return{formatoInvalido:!0};let[l,m]=n.split("-").map(Number);if(m<1||m>12)return{mesInvalido:!0};let g=new Date().getFullYear();return l<g-10||l>g+10?{anioInvalido:!0}:null}validarMes(t){if(!t)return null;let n=this.calculationsService.validarMontoPersonalizado(t,0);return n.valido?null:n.error||"Mes inv\xE1lido"}validarMonto(t){return t<0?"El monto no puede ser negativo":t>999999999?"El monto es demasiado grande":null}esMesDuplicado(t,n){return n?this.montosPersonalizadosArray.controls.some((i,l)=>l!==t&&i.get("mes")?.value===n):!1}getErrorMessage(t,n){let i=this.montosPersonalizadosArray.at(t).get(n);return!i||!i.errors?"":i.errors.required?`${n==="mes"?"El mes":"El monto"} es requerido`:i.errors.formatoInvalido?"Formato de mes inv\xE1lido":i.errors.mesInvalido?"El mes debe estar entre 01 y 12":i.errors.anioInvalido?"El a\xF1o debe estar en un rango razonable":i.errors.min?"El monto no puede ser negativo":i.errors.max?"El monto es demasiado grande":""}get isFormValid(){return this.form.valid&&!this.tieneMesesDuplicados()}tieneMesesDuplicados(){let t=this.montosPersonalizadosArray.controls.map(n=>n.get("mes")?.value).filter(n=>n);return new Set(t).size!==t.length}static \u0275fac=function(n){return new(n||r)(M(R),M(yt))};static \u0275cmp=b({type:r,selectors:[["app-monto-personalizado"]],inputs:{gasto:"gasto",montosPersonalizados:"montosPersonalizados"},outputs:{montosPersonalizadosChange:"montosPersonalizadosChange"},decls:21,vars:4,consts:[[1,"monto-personalizado-container"],[1,"header-section"],[1,"header-content"],[1,"header-icon"],[1,"header-text"],[1,"header-title"],[1,"header-subtitle"],[1,"form-content"],[1,"form-container",3,"formGroup"],["formArrayName","montosPersonalizados",1,"montos-list"],["class","monto-item",3,"formGroupName",4,"ngFor","ngForOf"],["class","empty-state",4,"ngIf"],[1,"form-actions"],["mat-raised-button","","color","primary","type","button","aria-label","Agregar nuevo monto personalizado",1,"add-button",3,"click"],["class","help-section",4,"ngIf"],[1,"monto-item",3,"formGroupName"],[1,"monto-card"],[1,"monto-card-content"],[1,"form-row"],["appearance","outline",1,"half-width"],["matInput","","type","month","formControlName","mes","aria-label","Seleccionar mes para monto personalizado",3,"click"],["matSuffix",""],[4,"ngIf"],["matInput","","type","number","formControlName","monto","placeholder","0","min","0","step","0.01","aria-label","Monto personalizado"],["matPrefix",""],[1,"delete-button-container"],["mat-icon-button","","type","button","matTooltip","Eliminar monto personalizado","aria-label","Eliminar monto personalizado",1,"delete-button",3,"click"],["appearance","outline",1,"full-width","notas-field"],["matInput","","formControlName","notas","placeholder","Motivo del cambio de monto...","rows","2","aria-label","Notas adicionales"],["class","comparison-section",4,"ngIf"],[1,"comparison-section"],[1,"comparison-item"],[1,"comparison-label"],[1,"comparison-value","base"],[1,"comparison-value"],[1,"empty-state"],[1,"empty-icon"],[1,"empty-content"],[1,"empty-title"],[1,"empty-description"],[1,"help-section"],[1,"help-card"],[1,"help-header"],[1,"help-icon"],[1,"help-title"],[1,"help-content"],[1,"help-list"]],template:function(n,i){n&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"mat-icon",3),a(4,"calendar_month"),e(),o(5,"div",4)(6,"h3",5),a(7,"Montos Personalizados"),e(),o(8,"p",6),a(9," Configure montos espec\xEDficos para ciertos meses que reemplazar\xE1n el c\xE1lculo autom\xE1tico "),e()()()(),o(10,"div",7)(11,"form",8)(12,"div",9),d(13,kt,29,7,"div",10)(14,Vt,8,0,"div",11),e(),o(15,"div",12)(16,"button",13),f("click",function(){return i.agregarMontoPersonalizado()}),o(17,"mat-icon"),a(18,"add"),e(),a(19," Agregar Monto Personalizado "),e()()(),d(20,$t,17,0,"div",14),e()()),n&2&&(s(11),c("formGroup",i.form),s(2),c("ngForOf",i.montosPersonalizadosArray.controls),s(),c("ngIf",i.montosPersonalizadosArray.length===0),s(6),c("ngIf",i.montosPersonalizadosArray.length>0))},dependencies:[S,E,z,k,A,F,w,I,T,N,D,G,dt,gt,j,J,$,V,L,Q,H,B,q,U,Y,Pt,lt],styles:['@charset "UTF-8";.monto-personalizado-container[_ngcontent-%COMP%]{background:var(--mat-sys-surface-container-high);color:var(--mat-sys-on-surface);border-radius:16px;overflow:hidden;box-shadow:var(--mat-sys-elevation-level1)}.monto-personalizado-container[_ngcontent-%COMP%]   .header-section[_ngcontent-%COMP%]{background:var(--mat-sys-surface-container-high);border-bottom:1px solid var(--mat-sys-outline-variant);padding:20px 24px}.monto-personalizado-container[_ngcontent-%COMP%]   .header-section[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px}.monto-personalizado-container[_ngcontent-%COMP%]   .header-section[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .header-icon[_ngcontent-%COMP%]{width:32px;height:32px;font-size:32px;color:var(--mat-sys-primary);flex-shrink:0}.monto-personalizado-container[_ngcontent-%COMP%]   .header-section[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .header-text[_ngcontent-%COMP%]{flex:1}.monto-personalizado-container[_ngcontent-%COMP%]   .header-section[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .header-text[_ngcontent-%COMP%]   .header-title[_ngcontent-%COMP%]{margin:0 0 8px;font-size:20px;font-weight:500;color:var(--mat-sys-on-surface)}.monto-personalizado-container[_ngcontent-%COMP%]   .header-section[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .header-text[_ngcontent-%COMP%]   .header-subtitle[_ngcontent-%COMP%]{margin:0;font-size:14px;line-height:1.5;color:var(--mat-sys-on-surface-variant)}.monto-personalizado-container[_ngcontent-%COMP%]   .form-content[_ngcontent-%COMP%]{padding:24px}.monto-personalizado-container[_ngcontent-%COMP%]   .form-content[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .montos-list[_ngcontent-%COMP%]{margin-bottom:24px}.monto-personalizado-container[_ngcontent-%COMP%]   .form-content[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .montos-list[_ngcontent-%COMP%]   .monto-item[_ngcontent-%COMP%]{margin-bottom:20px;animation:_ngcontent-%COMP%_slideIn .3s cubic-bezier(.4,0,.2,1)}.monto-personalizado-container[_ngcontent-%COMP%]   .form-content[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .montos-list[_ngcontent-%COMP%]   .monto-item[_ngcontent-%COMP%]   .monto-card[_ngcontent-%COMP%]{background:var(--mat-sys-surface-container-low);border:1px solid var(--mat-sys-outline-variant);border-radius:12px;transition:all .2s cubic-bezier(.4,0,.2,1)}.monto-personalizado-container[_ngcontent-%COMP%]   .form-content[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .montos-list[_ngcontent-%COMP%]   .monto-item[_ngcontent-%COMP%]   .monto-card[_ngcontent-%COMP%]:hover{box-shadow:var(--mat-sys-elevation-level2);border-color:var(--mat-sys-outline)}.monto-personalizado-container[_ngcontent-%COMP%]   .form-content[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .montos-list[_ngcontent-%COMP%]   .monto-item[_ngcontent-%COMP%]   .monto-card[_ngcontent-%COMP%]   .monto-card-content[_ngcontent-%COMP%]{padding:20px}.monto-personalizado-container[_ngcontent-%COMP%]   .form-content[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .montos-list[_ngcontent-%COMP%]   .monto-item[_ngcontent-%COMP%]   .monto-card[_ngcontent-%COMP%]   .monto-card-content[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{display:flex;gap:16px;margin-bottom:16px;align-items:flex-start}.monto-personalizado-container[_ngcontent-%COMP%]   .form-content[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .montos-list[_ngcontent-%COMP%]   .monto-item[_ngcontent-%COMP%]   .monto-card[_ngcontent-%COMP%]   .monto-card-content[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]:last-child{margin-bottom:0}.monto-personalizado-container[_ngcontent-%COMP%]   .form-content[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .montos-list[_ngcontent-%COMP%]   .monto-item[_ngcontent-%COMP%]   .monto-card[_ngcontent-%COMP%]   .monto-card-content[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]   .half-width[_ngcontent-%COMP%]{flex:1;min-width:0}.monto-personalizado-container[_ngcontent-%COMP%]   .form-content[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .montos-list[_ngcontent-%COMP%]   .monto-item[_ngcontent-%COMP%]   .monto-card[_ngcontent-%COMP%]   .monto-card-content[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]{width:100%}.monto-personalizado-container[_ngcontent-%COMP%]   .form-content[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .montos-list[_ngcontent-%COMP%]   .monto-item[_ngcontent-%COMP%]   .monto-card[_ngcontent-%COMP%]   .monto-card-content[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]   .delete-button-container[_ngcontent-%COMP%]{display:flex;align-items:center;padding-top:8px}.monto-personalizado-container[_ngcontent-%COMP%]   .form-content[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .montos-list[_ngcontent-%COMP%]   .monto-item[_ngcontent-%COMP%]   .monto-card[_ngcontent-%COMP%]   .monto-card-content[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]   .delete-button-container[_ngcontent-%COMP%]   .delete-button[_ngcontent-%COMP%]{color:var(--mat-sys-error);transition:all .2s ease}.monto-personalizado-container[_ngcontent-%COMP%]   .form-content[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .montos-list[_ngcontent-%COMP%]   .monto-item[_ngcontent-%COMP%]   .monto-card[_ngcontent-%COMP%]   .monto-card-content[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]   .delete-button-container[_ngcontent-%COMP%]   .delete-button[_ngcontent-%COMP%]:hover{background-color:var(--mat-sys-error-container);color:var(--mat-sys-on-error-container)}.monto-personalizado-container[_ngcontent-%COMP%]   .form-content[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .montos-list[_ngcontent-%COMP%]   .monto-item[_ngcontent-%COMP%]   .monto-card[_ngcontent-%COMP%]   .monto-card-content[_ngcontent-%COMP%]   .notas-field[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:vertical;min-height:60px}.monto-personalizado-container[_ngcontent-%COMP%]   .form-content[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .montos-list[_ngcontent-%COMP%]   .monto-item[_ngcontent-%COMP%]   .monto-card[_ngcontent-%COMP%]   .monto-card-content[_ngcontent-%COMP%]   .comparison-section[_ngcontent-%COMP%]{margin-top:20px;padding:16px;background:var(--mat-sys-primary-container);border-radius:8px;border-left:4px solid var(--mat-sys-primary)}.monto-personalizado-container[_ngcontent-%COMP%]   .form-content[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .montos-list[_ngcontent-%COMP%]   .monto-item[_ngcontent-%COMP%]   .monto-card[_ngcontent-%COMP%]   .monto-card-content[_ngcontent-%COMP%]   .comparison-section[_ngcontent-%COMP%]   .comparison-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}.monto-personalizado-container[_ngcontent-%COMP%]   .form-content[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .montos-list[_ngcontent-%COMP%]   .monto-item[_ngcontent-%COMP%]   .monto-card[_ngcontent-%COMP%]   .monto-card-content[_ngcontent-%COMP%]   .comparison-section[_ngcontent-%COMP%]   .comparison-item[_ngcontent-%COMP%]:last-child{margin-bottom:0}.monto-personalizado-container[_ngcontent-%COMP%]   .form-content[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .montos-list[_ngcontent-%COMP%]   .monto-item[_ngcontent-%COMP%]   .monto-card[_ngcontent-%COMP%]   .monto-card-content[_ngcontent-%COMP%]   .comparison-section[_ngcontent-%COMP%]   .comparison-item[_ngcontent-%COMP%]   .comparison-label[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:var(--mat-sys-on-primary-container)}.monto-personalizado-container[_ngcontent-%COMP%]   .form-content[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .montos-list[_ngcontent-%COMP%]   .monto-item[_ngcontent-%COMP%]   .monto-card[_ngcontent-%COMP%]   .monto-card-content[_ngcontent-%COMP%]   .comparison-section[_ngcontent-%COMP%]   .comparison-item[_ngcontent-%COMP%]   .comparison-value[_ngcontent-%COMP%]{font-size:14px;font-weight:600}.monto-personalizado-container[_ngcontent-%COMP%]   .form-content[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .montos-list[_ngcontent-%COMP%]   .monto-item[_ngcontent-%COMP%]   .monto-card[_ngcontent-%COMP%]   .monto-card-content[_ngcontent-%COMP%]   .comparison-section[_ngcontent-%COMP%]   .comparison-item[_ngcontent-%COMP%]   .comparison-value.base[_ngcontent-%COMP%]{color:var(--mat-sys-on-primary-container)}.monto-personalizado-container[_ngcontent-%COMP%]   .form-content[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .montos-list[_ngcontent-%COMP%]   .monto-item[_ngcontent-%COMP%]   .monto-card[_ngcontent-%COMP%]   .monto-card-content[_ngcontent-%COMP%]   .comparison-section[_ngcontent-%COMP%]   .comparison-item[_ngcontent-%COMP%]   .comparison-value.positive[_ngcontent-%COMP%]{color:var(--mat-sys-tertiary)}.monto-personalizado-container[_ngcontent-%COMP%]   .form-content[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .montos-list[_ngcontent-%COMP%]   .monto-item[_ngcontent-%COMP%]   .monto-card[_ngcontent-%COMP%]   .monto-card-content[_ngcontent-%COMP%]   .comparison-section[_ngcontent-%COMP%]   .comparison-item[_ngcontent-%COMP%]   .comparison-value.negative[_ngcontent-%COMP%]{color:var(--mat-sys-error)}.monto-personalizado-container[_ngcontent-%COMP%]   .form-content[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]{text-align:center;padding:48px 24px;background:var(--mat-sys-surface-container-low);border:2px dashed var(--mat-sys-outline-variant);border-radius:12px}.monto-personalizado-container[_ngcontent-%COMP%]   .form-content[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{font-size:64px;width:64px;height:64px;color:var(--mat-sys-outline);margin-bottom:16px}.monto-personalizado-container[_ngcontent-%COMP%]   .form-content[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-content[_ngcontent-%COMP%]   .empty-title[_ngcontent-%COMP%]{margin:0 0 8px;font-size:18px;font-weight:500;color:var(--mat-sys-on-surface)}.monto-personalizado-container[_ngcontent-%COMP%]   .form-content[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-content[_ngcontent-%COMP%]   .empty-description[_ngcontent-%COMP%]{font-size:14px;line-height:1.5;color:var(--mat-sys-on-surface-variant);max-width:400px;margin:0 auto}.monto-personalizado-container[_ngcontent-%COMP%]   .form-content[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]{display:flex;justify-content:center;margin:32px 0 24px}.monto-personalizado-container[_ngcontent-%COMP%]   .form-content[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   .add-button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:12px 24px;font-weight:500;border-radius:24px}.monto-personalizado-container[_ngcontent-%COMP%]   .form-content[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   .add-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px}.monto-personalizado-container[_ngcontent-%COMP%]   .form-content[_ngcontent-%COMP%]   .help-section[_ngcontent-%COMP%]{margin-top:24px}.monto-personalizado-container[_ngcontent-%COMP%]   .form-content[_ngcontent-%COMP%]   .help-section[_ngcontent-%COMP%]   .help-card[_ngcontent-%COMP%]{background:var(--mat-sys-secondary-container);border:1px solid var(--mat-sys-outline-variant);border-radius:12px;padding:20px}.monto-personalizado-container[_ngcontent-%COMP%]   .form-content[_ngcontent-%COMP%]   .help-section[_ngcontent-%COMP%]   .help-card[_ngcontent-%COMP%]   .help-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin-bottom:16px}.monto-personalizado-container[_ngcontent-%COMP%]   .form-content[_ngcontent-%COMP%]   .help-section[_ngcontent-%COMP%]   .help-card[_ngcontent-%COMP%]   .help-header[_ngcontent-%COMP%]   .help-icon[_ngcontent-%COMP%]{color:var(--mat-sys-secondary);font-size:24px;width:24px;height:24px}.monto-personalizado-container[_ngcontent-%COMP%]   .form-content[_ngcontent-%COMP%]   .help-section[_ngcontent-%COMP%]   .help-card[_ngcontent-%COMP%]   .help-header[_ngcontent-%COMP%]   .help-title[_ngcontent-%COMP%]{margin:0;font-size:16px;font-weight:500;color:var(--mat-sys-on-secondary-container)}.monto-personalizado-container[_ngcontent-%COMP%]   .form-content[_ngcontent-%COMP%]   .help-section[_ngcontent-%COMP%]   .help-card[_ngcontent-%COMP%]   .help-content[_ngcontent-%COMP%]   .help-list[_ngcontent-%COMP%]{margin:0;padding-left:20px;color:var(--mat-sys-on-secondary-container)}.monto-personalizado-container[_ngcontent-%COMP%]   .form-content[_ngcontent-%COMP%]   .help-section[_ngcontent-%COMP%]   .help-card[_ngcontent-%COMP%]   .help-content[_ngcontent-%COMP%]   .help-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:8px;font-size:14px;line-height:1.5}.monto-personalizado-container[_ngcontent-%COMP%]   .form-content[_ngcontent-%COMP%]   .help-section[_ngcontent-%COMP%]   .help-card[_ngcontent-%COMP%]   .help-content[_ngcontent-%COMP%]   .help-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{margin-bottom:0}@media (max-width: 768px){.monto-personalizado-container[_ngcontent-%COMP%]{border-radius:0}.monto-personalizado-container[_ngcontent-%COMP%]   .header-section[_ngcontent-%COMP%]{padding:16px 20px}.monto-personalizado-container[_ngcontent-%COMP%]   .header-section[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]{gap:12px}.monto-personalizado-container[_ngcontent-%COMP%]   .header-section[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .header-icon[_ngcontent-%COMP%]{width:28px;height:28px;font-size:28px}.monto-personalizado-container[_ngcontent-%COMP%]   .header-section[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .header-text[_ngcontent-%COMP%]   .header-title[_ngcontent-%COMP%]{font-size:18px}.monto-personalizado-container[_ngcontent-%COMP%]   .form-content[_ngcontent-%COMP%]{padding:20px}.monto-personalizado-container[_ngcontent-%COMP%]   .form-content[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .montos-list[_ngcontent-%COMP%]   .monto-item[_ngcontent-%COMP%]   .monto-card[_ngcontent-%COMP%]   .monto-card-content[_ngcontent-%COMP%]{padding:16px}.monto-personalizado-container[_ngcontent-%COMP%]   .form-content[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .montos-list[_ngcontent-%COMP%]   .monto-item[_ngcontent-%COMP%]   .monto-card[_ngcontent-%COMP%]   .monto-card-content[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{flex-direction:column;gap:16px}.monto-personalizado-container[_ngcontent-%COMP%]   .form-content[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .montos-list[_ngcontent-%COMP%]   .monto-item[_ngcontent-%COMP%]   .monto-card[_ngcontent-%COMP%]   .monto-card-content[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]   .half-width[_ngcontent-%COMP%]{width:100%}.monto-personalizado-container[_ngcontent-%COMP%]   .form-content[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .montos-list[_ngcontent-%COMP%]   .monto-item[_ngcontent-%COMP%]   .monto-card[_ngcontent-%COMP%]   .monto-card-content[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]   .delete-button-container[_ngcontent-%COMP%]{align-self:flex-end;padding-top:0}.monto-personalizado-container[_ngcontent-%COMP%]   .form-content[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .montos-list[_ngcontent-%COMP%]   .monto-item[_ngcontent-%COMP%]   .monto-card[_ngcontent-%COMP%]   .monto-card-content[_ngcontent-%COMP%]   .comparison-section[_ngcontent-%COMP%]   .comparison-item[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:4px}.monto-personalizado-container[_ngcontent-%COMP%]   .form-content[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]{padding:32px 20px}.monto-personalizado-container[_ngcontent-%COMP%]   .form-content[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px}.monto-personalizado-container[_ngcontent-%COMP%]   .form-content[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   .add-button[_ngcontent-%COMP%]{width:100%;justify-content:center}}@media (max-width: 480px){.monto-personalizado-container[_ngcontent-%COMP%]   .form-content[_ngcontent-%COMP%]{padding:16px}.monto-personalizado-container[_ngcontent-%COMP%]   .form-content[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .montos-list[_ngcontent-%COMP%]   .monto-item[_ngcontent-%COMP%]   .monto-card[_ngcontent-%COMP%]   .monto-card-content[_ngcontent-%COMP%]{padding:12px}}@keyframes _ngcontent-%COMP%_slideIn{0%{opacity:0;transform:translateY(16px)}to{opacity:1;transform:translateY(0)}}.mat-mdc-form-field.mat-focused[_ngcontent-%COMP%]   .mat-mdc-form-field-outline[_ngcontent-%COMP%]{color:var(--mat-sys-primary)}.mat-mdc-form-field.mat-form-field-invalid[_ngcontent-%COMP%]   .mat-mdc-form-field-outline[_ngcontent-%COMP%]{color:var(--mat-sys-error)}input[type=month][_ngcontent-%COMP%]{cursor:pointer}input[type=month][_ngcontent-%COMP%]::-webkit-calendar-picker-indicator{cursor:pointer;opacity:.7;transition:opacity .2s ease}input[type=month][_ngcontent-%COMP%]::-webkit-calendar-picker-indicator:hover{opacity:1}.mat-mdc-form-field.mat-form-field-invalid[_ngcontent-%COMP%]   .mat-mdc-text-field-wrapper[_ngcontent-%COMP%]{background-color:var(--mat-sys-error-container)}.mat-mdc-tooltip[_ngcontent-%COMP%]{background:var(--mat-sys-inverse-surface);color:var(--mat-sys-inverse-on-surface)}']})};function Lt(r,t){if(r&1&&(rt(0),o(1,"mat-icon",32),a(2),e(),o(3,"span"),a(4),e(),st()),r&2){let n=t.ngIf;s(),Z("color",n.color),s(),P(n.icono),s(2),P(n.nombre)}}function Bt(r,t){if(r&1&&(o(0,"mat-option",33)(1,"mat-icon",34),a(2),e(),o(3,"span"),a(4),e()()),r&2){let n=t.$implicit;c("value",n.id),s(),Z("color",n.color),s(),P(n.icono),s(2),P(n.nombre)}}function qt(r,t){r&1&&(o(0,"mat-error"),a(1,"Requerido."),e())}function Ut(r,t){r&1&&(o(0,"mat-error"),a(1,"Requerido."),e())}function Yt(r,t){r&1&&(o(0,"mat-error"),a(1,"Requerido."),e())}function Ht(r,t){r&1&&(o(0,"mat-error"),a(1,"Debe ser mayor a 0."),e())}function Qt(r,t){r&1&&(o(0,"mat-error"),a(1,"Requerido."),e())}function Jt(r,t){r&1&&(o(0,"div",9)(1,"mat-form-field",10)(2,"mat-label"),a(3,"Recurrencia"),e(),o(4,"mat-select",35)(5,"mat-option",36),a(6,"Mensual"),e(),o(7,"mat-option",37),a(8,"Bimestral"),e(),o(9,"mat-option",38),a(10,"Trimestral"),e()()(),o(11,"mat-form-field",10)(12,"mat-label"),a(13,"Cuotas Totales"),e(),C(14,"input",39),e()())}function Kt(r,t){r&1&&(o(0,"mat-error"),a(1,"Debe ser mayor o igual a 0."),e())}function Wt(r,t){r&1&&(o(0,"mat-error"),a(1,"Debe ser menor o igual a 100."),e())}function Xt(r,t){if(r&1&&(o(0,"div",9)(1,"mat-form-field",10)(2,"mat-label"),a(3,"Aumento (%)"),e(),C(4,"input",40),o(5,"span",41),a(6,"%"),e(),o(7,"mat-hint"),a(8,"Porcentaje de aumento peri\xF3dico"),e(),d(9,Kt,2,0,"mat-error",12)(10,Wt,2,0,"mat-error",12),e(),o(11,"mat-form-field",10)(12,"mat-label"),a(13,"Periodicidad del Aumento"),e(),o(14,"mat-select",42)(15,"mat-option",36),a(16,"Mensual"),e(),o(17,"mat-option",38),a(18,"Trimestral"),e(),o(19,"mat-option",43),a(20,"Semestral"),e(),o(21,"mat-option",44),a(22,"Anual"),e()()()()),r&2){let n=u();s(9),c("ngIf",n.proyeccionAumento==null?null:n.proyeccionAumento.hasError("min")),s(),c("ngIf",n.proyeccionAumento==null?null:n.proyeccionAumento.hasError("max"))}}function Zt(r,t){if(r&1){let n=y();o(0,"div",8)(1,"h3"),a(2,"Montos Personalizados"),e(),o(3,"p",45),a(4," Define montos espec\xEDficos para ciertos meses que reemplazar\xE1n el c\xE1lculo autom\xE1tico de aumentos. "),e(),o(5,"app-monto-personalizado",46),f("montosPersonalizadosChange",function(l){v(n);let m=u();return x(m.onMontosPersonalizadosChange(l))}),e()()}if(r&2){let n=u();s(5),c("gasto",n.gastoForm.value)("montosPersonalizados",n.montosPersonalizados)}}function te(r,t){if(r&1&&(o(0,"mat-option",33),a(1),e()),r&2){let n=t.$implicit;c("value",n.id),s(),h(" ",n.nombre," ")}}function ee(r,t){r&1&&C(0,"mat-spinner",47)}function ne(r,t){if(r&1&&(o(0,"span"),a(1),e()),r&2){let n=u();s(),P(n.isEditing?"Guardar":"Crear")}}var zt=class r{constructor(t,n,i,l){this.dialogRef=t;this.data=n;this.appStateService=i;this.fb=l;this.categorias$=this.appStateService.categories$,this.tarjetas$=this.appStateService.cards$,this.gastoForm=this.createForm(),this.categorias$.subscribe(m=>{this.categorias=m})}onSave(){this.onSubmit()}saving=!1;categorias$;tarjetas$;categorias=[];gastoForm;isEditing=!1;montoPreview="";montosPersonalizados=[];ngOnInit(){this.setupFormSubscriptions(),this.isEditing=this.data.mode?this.data.mode==="edit":!!this.data.gasto,this.data.gasto?this.loadGastoData():this.resetFormData()}createForm(){return this.fb.group({categoriaId:["",[p.required]],descripcion:["",[p.required,p.minLength(3),p.maxLength(100)]],monto:[0,[p.required,p.min(.01)]],montoTotal:[0,[p.min(0)]],fechaInicio:[this.getCurrentMonth(),[p.required]],activo:[!0],esRecurrente:[!1],tipoRecurrencia:["MENSUAL"],cuotasTotales:[1],cuotasRestantes:[1],esDebitoAutomatico:[!1],idTarjeta:[""],fechaCompra:[""],descripcionComercio:[""],cuotaActual:[1],montoCuota:[0],esUnico:[!1],notas:[""],esGastoFijo:[!1],proyeccionAumento:[0,[p.min(0),p.max(100)]],periodicidadAumento:["ANUAL"]})}getCurrentMonth(){let t=new Date;return`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}`}setupFormSubscriptions(){this.monto?.valueChanges.subscribe(t=>{this.updateMontoPreview(t)}),this.esRecurrente?.valueChanges.subscribe(t=>{this.handleRecurrenteChange(t)}),this.esGastoFijo?.valueChanges.subscribe(t=>{this.handleGastoFijoChange(t)}),this.idTarjeta?.valueChanges.subscribe(t=>{this.handleTarjetaChange(t)}),this.cuotasTotales?.valueChanges.subscribe(()=>{this.recalcularMontos("cuotasTotales")}),this.montoTotal?.valueChanges.subscribe(()=>{this.recalcularMontos("montoTotal")}),this.monto?.valueChanges.subscribe(()=>{this.recalcularMontos("monto")})}lastChangedField="";recalcularMontos(t){if(this.lastChangedField===t)return;this.lastChangedField=t;let n=Number(this.cuotasTotales?.value)||1,i=Number(this.monto?.value)||0,l=Number(this.montoTotal?.value)||0;if(this.idTarjeta?.value&&n>1)switch(t){case"montoTotal":if(n>0&&l>0){let m=l/n;this.monto?.setValue(m,{emitEvent:!1}),this.montoCuota?.setValue(m,{emitEvent:!1})}break;case"monto":if(i>0){let m=i*n;this.montoTotal?.setValue(m,{emitEvent:!1}),this.montoCuota?.setValue(i,{emitEvent:!1})}break;case"cuotasTotales":break}setTimeout(()=>{this.lastChangedField=""},100)}handleRecurrenteChange(t){t||this.gastoForm.patchValue({tipoRecurrencia:"MENSUAL",cuotasTotales:1,cuotasRestantes:1})}handleGastoFijoChange(t){t?this.gastoForm.patchValue({esRecurrente:!1,cuotasTotales:null,cuotasRestantes:null}):this.gastoForm.patchValue({proyeccionAumento:0,periodicidadAumento:"ANUAL"})}handleTarjetaChange(t){t||this.gastoForm.patchValue({fechaCompra:"",descripcionComercio:"",esUnico:!1})}loadGastoData(){this.data.gasto&&(this.gastoForm.patchValue({categoriaId:this.data.gasto.categoriaId,descripcion:this.data.gasto.descripcion,monto:this.data.gasto.monto,montoTotal:this.data.gasto.montoTotal||0,fechaInicio:this.data.gasto.fechaInicio,activo:this.data.gasto.activo,esRecurrente:this.data.gasto.esRecurrente,tipoRecurrencia:this.data.gasto.tipoRecurrencia,cuotasTotales:this.data.gasto.cuotasTotales||1,cuotasRestantes:this.data.gasto.cuotasRestantes||1,esDebitoAutomatico:this.data.gasto.esDebitoAutomatico||!1,idTarjeta:this.data.gasto.idTarjeta||"",fechaCompra:this.data.gasto.fechaCompra||"",descripcionComercio:this.data.gasto.descripcionComercio||"",cuotaActual:this.data.gasto.cuotaActual||1,montoCuota:this.data.gasto.montoCuota||0,esUnico:this.data.gasto.esUnico||!1,notas:this.data.gasto.notas||"",esGastoFijo:this.data.gasto.esGastoFijo||!1,proyeccionAumento:this.data.gasto.proyeccionAumento||0,periodicidadAumento:this.data.gasto.periodicidadAumento||"ANUAL"}),this.montosPersonalizados=this.data.gasto.montosPersonalizados?[...this.data.gasto.montosPersonalizados]:[],this.updateMontoPreview(this.data.gasto.monto))}resetFormData(){this.gastoForm.reset({categoriaId:"",descripcion:"",monto:0,montoTotal:0,fechaInicio:this.getCurrentMonth(),activo:!0,esRecurrente:!1,tipoRecurrencia:"MENSUAL",cuotasTotales:1,cuotasRestantes:1,esDebitoAutomatico:!1,idTarjeta:"",fechaCompra:"",descripcionComercio:"",cuotaActual:1,montoCuota:0,esUnico:!1,notas:"",esGastoFijo:!1,proyeccionAumento:0,periodicidadAumento:"ANUAL"}),this.montoPreview=""}onSubmit(){if(this.gastoForm.valid){this.saving=!0;let t=this.gastoForm.value,n=Number(t.cuotasTotales)||1,i=Number(t.monto)||0,l=!!t.idTarjeta&&n>1,m=i*n,g={id:this.isEditing&&this.data.gasto?this.data.gasto.id:this.generateId(),categoriaId:t.categoriaId,descripcion:t.descripcion.trim(),monto:i,montoTotal:m,fechaInicio:t.fechaInicio,activo:t.activo,esRecurrente:t.esRecurrente,tipoRecurrencia:t.tipoRecurrencia,cuotasTotales:n,cuotasRestantes:t.cuotasRestantes||t.cuotasTotales,esDebitoAutomatico:t.esDebitoAutomatico,idTarjeta:t.idTarjeta||void 0,fechaCompra:t.fechaCompra||void 0,descripcionComercio:t.descripcionComercio||void 0,cuotaActual:t.cuotaActual,montoCuota:l?i:Number(t.montoCuota)||0,esUnico:t.esUnico,notas:t.notas||void 0,esGastoFijo:t.esGastoFijo||!1,proyeccionAumento:t.proyeccionAumento||void 0,periodicidadAumento:t.periodicidadAumento||void 0,montosPersonalizados:this.montosPersonalizados.length>0?this.montosPersonalizados:void 0};try{this.isEditing&&this.data.gasto?this.appStateService.updateRecurringExpense(g):this.appStateService.addRecurringExpense(g),this.saving=!1,this.dialogRef.close(!0)}catch(_){console.error("Error al guardar el gasto:",_),this.saving=!1}}else this.markFormGroupTouched()}onCancel(){this.dialogRef.close()}onReset(){this.resetFormData()}onMontoChange(t){let n=t.target.value;this.updateMontoPreview(Number(n))}updateMontoPreview(t){t&&t>0?this.montoPreview=this.formatCurrency(t):this.montoPreview=""}onMontosPersonalizadosChange(t){this.montosPersonalizados=[...t]}formatCurrency(t){return!t||t<=0?"$0":new Intl.NumberFormat("es-AR",{style:"currency",currency:"ARS",minimumFractionDigits:0,maximumFractionDigits:2}).format(t)}getTipoGastoTexto(){let t=this.gastoForm.get("esRecurrente")?.value,n=this.gastoForm.get("tipoRecurrencia")?.value;return this.gastoForm.get("idTarjeta")?.value?t?`Tarjeta ${n?.toLowerCase()||"mensual"}`:"Compra con tarjeta":t?`Gasto ${n?.toLowerCase()||"mensual"}`:"Gasto \xFAnico"}markFormGroupTouched(){Object.keys(this.gastoForm.controls).forEach(t=>{this.gastoForm.get(t)?.markAsTouched()})}generateId(){return`gasto_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}getCategoriaTexto(){let t=this.categoriaId?.value;if(!t)return"Sin categor\xEDa";let n=this.categorias.find(i=>i.id===t);return n?n.nombre:"Sin categor\xEDa"}getTipoRecurrenciaTexto(){let t=this.tipoRecurrencia?.value||"MENSUAL";return{MENSUAL:"Mensual",SEMANAL:"Semanal",QUINCENAL:"Quincenal",BIMESTRAL:"Bimestral",TRIMESTRAL:"Trimestral",SEMESTRAL:"Semestral",ANUAL:"Anual"}[t]||"Mensual"}getEstadoTexto(){return this.activo?.value?"Activo":"Inactivo"}get categoriaId(){return this.gastoForm.get("categoriaId")}get descripcion(){return this.gastoForm.get("descripcion")}get monto(){return this.gastoForm.get("monto")}get montoTotal(){return this.gastoForm.get("montoTotal")}get fechaInicio(){return this.gastoForm.get("fechaInicio")}get activo(){return this.gastoForm.get("activo")}get comercio(){return this.gastoForm.get("descripcionComercio")}get fechaCompra(){return this.gastoForm.get("fechaCompra")}get notas(){return this.gastoForm.get("notas")}get esRecurrente(){return this.gastoForm.get("esRecurrente")}get tipoRecurrencia(){return this.gastoForm.get("tipoRecurrencia")}get cuotasTotales(){return this.gastoForm.get("cuotasTotales")}get montoCuota(){return this.gastoForm.get("montoCuota")}get esDebitoAutomatico(){return this.gastoForm.get("esDebitoAutomatico")}get idTarjeta(){return this.gastoForm.get("idTarjeta")}get descripcionComercio(){return this.gastoForm.get("descripcionComercio")}get esUnico(){return this.gastoForm.get("esUnico")}get esGastoFijo(){return this.gastoForm.get("esGastoFijo")}get proyeccionAumento(){return this.gastoForm.get("proyeccionAumento")}get periodicidadAumento(){return this.gastoForm.get("periodicidadAumento")}getSelectedCategoria(){let t=this.categoriaId?.value;if(t)return this.categorias.find(n=>n.id===t)}getSelectedTarjeta(){let t=this.idTarjeta?.value;if(!t)return;let n=[];return this.tarjetas$.subscribe(i=>n=i).unsubscribe(),n.find(i=>i.id===t)}static \u0275fac=function(n){return new(n||r)(M(ht),M(Ot),M(Et),M(R))};static \u0275cmp=b({type:r,selectors:[["app-gasto-dialog"]],decls:91,vars:20,consts:[[1,"unified-modal"],[1,"modal-header"],[1,"header-content"],[1,"header-icon"],[1,"header-title"],["mat-icon-button","","mat-dialog-close","",1,"close-button"],[1,"modal-content"],[3,"keydown.enter","formGroup"],[1,"form-section"],[1,"form-row"],[1,"half-width"],["formControlName","categoriaId","required",""],[4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],["matInput","","formControlName","descripcion","required",""],["matInput","","type","number","formControlName","monto","required","","min","0.01"],["matTextPrefix",""],["matInput","","type","month","formControlName","fechaInicio","required","",3,"click"],[1,"checkbox-container"],["formControlName","esRecurrente"],["class","form-row",4,"ngIf"],["formControlName","esGastoFijo"],["class","form-section",4,"ngIf"],["formControlName","idTarjeta"],["value",""],["formControlName","esDebitoAutomatico"],[1,"full-width","notas-area"],["matInput","","formControlName","notas","rows","2"],[1,"modal-actions"],["mat-stroked-button","","mat-dialog-close",""],["mat-raised-button","","color","primary",3,"click","disabled"],["diameter","20",4,"ngIf"],[2,"margin-right","6px"],[3,"value"],[2,"margin-right","8px"],["formControlName","tipoRecurrencia"],["value","MENSUAL"],["value","BIMESTRAL"],["value","TRIMESTRAL"],["matInput","","type","number","formControlName","cuotasTotales","min","1"],["matInput","","type","number","formControlName","proyeccionAumento","min","0","max","100"],["matTextSuffix",""],["formControlName","periodicidadAumento"],["value","SEMESTRAL"],["value","ANUAL"],[1,"section-description"],[3,"montosPersonalizadosChange","gasto","montosPersonalizados"],["diameter","20"]],template:function(n,i){n&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"mat-icon",3),a(4,"shopping_cart"),e(),o(5,"h2",4),a(6),e()(),o(7,"button",5)(8,"mat-icon"),a(9,"close"),e()()(),o(10,"div",6)(11,"form",7),f("keydown.enter",function(){return i.onSave()}),o(12,"div",8)(13,"h3"),a(14,"Informaci\xF3n B\xE1sica"),e(),o(15,"div",9)(16,"mat-form-field",10)(17,"mat-label"),a(18,"Categor\xEDa"),e(),o(19,"mat-select",11)(20,"mat-select-trigger"),d(21,Lt,5,4,"ng-container",12),e(),d(22,Bt,5,5,"mat-option",13),O(23,"async"),e(),d(24,qt,2,0,"mat-error",12),e(),o(25,"mat-form-field",10)(26,"mat-label"),a(27,"Descripci\xF3n"),e(),C(28,"input",14),d(29,Ut,2,0,"mat-error",12),e()(),o(30,"div",9)(31,"mat-form-field",10)(32,"mat-label"),a(33,"Monto"),e(),C(34,"input",15),o(35,"span",16),a(36,"$\xA0"),e(),d(37,Yt,2,0,"mat-error",12)(38,Ht,2,0,"mat-error",12),e(),o(39,"mat-form-field",10)(40,"mat-label"),a(41,"Fecha de Inicio"),e(),o(42,"input",17),f("click",function(m){return m.target.showPicker()}),e(),d(43,Qt,2,0,"mat-error",12),e()()(),o(44,"div",8)(45,"h3"),a(46,"Configuraci\xF3n Temporal"),e(),o(47,"div",9)(48,"div",18)(49,"mat-checkbox",19),a(50,"Es gasto recurrente"),e(),o(51,"mat-hint"),a(52,"Gastos que se repiten por un n\xFAmero limitado de cuotas"),e()()(),d(53,Jt,15,0,"div",20),o(54,"div",9)(55,"div",18)(56,"mat-checkbox",21),a(57,"Es gasto fijo"),e(),o(58,"mat-hint"),a(59,"Gastos que se repiten indefinidamente con aumentos configurables"),e()()(),d(60,Xt,23,2,"div",20),e(),d(61,Zt,6,2,"div",22),o(62,"div",8)(63,"h3"),a(64,"Opciones de Pago"),e(),o(65,"div",9)(66,"mat-form-field",10)(67,"mat-label"),a(68,"Tarjeta (Opcional)"),e(),o(69,"mat-select",23)(70,"mat-option",24),a(71,"Ninguna"),e(),d(72,te,2,2,"mat-option",13),O(73,"async"),e()(),o(74,"div",18)(75,"mat-checkbox",25),a(76,"D\xE9bito Autom\xE1tico"),e()()()(),o(77,"div",8)(78,"h3"),a(79,"Notas Adicionales"),e(),o(80,"div",9)(81,"mat-form-field",26)(82,"mat-label"),a(83,"Notas (opcional)"),e(),C(84,"textarea",27),e()()()()(),o(85,"div",28)(86,"button",29),a(87,"Cancelar"),e(),o(88,"button",30),f("click",function(){return i.onSubmit()}),d(89,ee,1,0,"mat-spinner",31)(90,ne,2,1,"span",12),e()()()),n&2&&(s(6),P(i.data.title||(i.isEditing?"Editar Gasto":"Nuevo Gasto")),s(5),c("formGroup",i.gastoForm),s(10),c("ngIf",i.getSelectedCategoria()),s(),c("ngForOf",et(23,16,i.categorias$)),s(2),c("ngIf",i.categoriaId==null?null:i.categoriaId.hasError("required")),s(5),c("ngIf",i.descripcion==null?null:i.descripcion.hasError("required")),s(8),c("ngIf",i.monto==null?null:i.monto.hasError("required")),s(),c("ngIf",i.monto==null?null:i.monto.hasError("min")),s(5),c("ngIf",i.fechaInicio==null?null:i.fechaInicio.hasError("required")),s(10),c("ngIf",i.esRecurrente==null?null:i.esRecurrente.value),s(7),c("ngIf",i.esGastoFijo==null?null:i.esGastoFijo.value),s(),c("ngIf",i.esGastoFijo==null?null:i.esGastoFijo.value),s(11),c("ngForOf",et(73,18,i.tarjetas$)),s(16),c("disabled",i.gastoForm.invalid||i.saving),s(),c("ngIf",i.saving),s(),c("ngIf",!i.saving))},dependencies:[S,E,z,k,A,F,w,I,T,ut,N,pt,D,G,j,J,$,V,L,Q,H,B,_t,q,U,Y,ft,Mt,Ct,vt,xt,bt,K,mt],styles:['@charset "UTF-8";.section-description[_ngcontent-%COMP%]{color:var(--mat-sys-on-surface-variant);font-size:14px;margin-bottom:16px;line-height:1.4}']})};export{zt as a};
